<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
      
    {% block meta %}
    <meta name="description" content=".">    <title>CheSS</title>  
    <link rel="icon" type="image/png" href="../chfaviconcrop.png">
    {% endblock %}
    




<style>
body {
	--block: 2rem;
}
label {
	display: none;
	width: var(--block);
	height: var(--block);
	position: absolute;
	background: #DDD;
}
{% for r in range(0,8) %}
label.r{{r}} {
	top: calc(var(--block) * {{r}});
}
{% endfor %}
{% for c in range(0,8) %}
label.c{{c}} {
	left: calc(var(--block) * {{c}});
}
{% endfor %}
label.g {
	background: #BBB;
}
label.off {
	top: calc(var(--block) * -2);
	left: calc(var(--block) * -2);
	z-index: 17;
	display: none;
}
{% for r in range(0,8) %}
label.off.r{{r}} {
	top: calc(var(--block) * {{r}});
}
{% endfor %}
{% for c in range(0,8) %}
label.off.c{{c}} {
	left: calc(var(--block) * {{c}});
}
{% endfor %}
input.a:checked ~ input:checked + label + label {
	display: inline-block;
}
	
	
	
input:Not(.a):checked + label {
	display: inline-block;
}
input {
	display: none;
}

input.a ~ span.a {
	display: none;
}
input.a ~ span > span {
	display: none;
}
input.a ~ span > span > label {
	display: none;
	z-index: 2;
}
{% for i in range(0,32) %}
input.a{{i}}:checked ~ span.p{{i}} {
	display: inline-block;
}
{% endfor %}



div.blocker {
	display: none;
	z-index: 7;
	position: absolute;
	left:0px;
	top:0px;
	background: red;
}
div.blocker.left {
	height: var(--block);
}
{% for r in range(0,8) %}
div.blocker.r{{r}} {
	top: calc(var(--block) * {{r}});
}
{% endfor %}
{% for c in range(0,8) %}
div.blocker.left.c{{c}} {
	left: 0px;
	width: calc(var(--block) * {{c}});
}	
{% endfor %}
{% for r in range(0,8) %}
	{% for c in range(0,8) %}
	input.a:checked ~ input.r{{r}}.c{{c}}:checked ~ div.blocker.left.r{{r}}.c{{c+1}} {
		display: inline-block;
	}
	{% endfor %}
{% endfor %}



{# pawns #}
{% for r in range(0,8) %}
input.white.pawn.ar{{r}}:checked ~ span > .ar{{r - 1}} {
	display: inline-block;
}
input.black.pawn.ar{{r}}:checked ~ span > .ar{{r + 1}} {
	display: inline-block;
}
{% endfor %}
{% for c in range(0,8) %}
input.pawn.ac{{c}}:checked ~ span > span > label.c{{c -1}} {
	display: inline-block;
}
input.pawn.ac{{c}}:checked ~ span > span > label.c{{c}} {
	display: inline-block;
}
input.pawn.ac{{c}}:checked ~ span > span > label.c{{c +1}} {
	display: inline-block;
}
{% endfor %}

{# rooks #}
input.rook.a:checked ~ span > span {
	display: inline-block;
}
{% for r in range(0,8) %}
input.rook.ar{{r}}:checked ~ span > span > label.r{{r}} {
	display: inline-block;
}
{% endfor %}
{% for c in range(0,8) %}
input.rook.ac{{c}}:checked ~ span > span > label.c{{c}} {
	display: inline-block;
}
{% endfor %}

</style>
</head>
<body>

{% for i in range(0,32) %}
	{% for r in range(0,8) %}
		{% for c in range(0,8) %}
			<input type="radio" name="p{{i}}" id="pa{{i}}-{{r}}{{c}}" class="a a{{i}} ar{{r}} ac{{c}} {{ types[i] | safe}}"></input>
			
		{% endfor %}
	{% endfor %}
	<span class="a p{{i}}">
	{% for r in range(0,8) %}
		<span class="ar{{r}}">
		{% for c in range(0,8) %}
			<label for="pb{{i}}-{{r}}{{c}}" class="r{{r}} c{{c}} {% if (r + c) % 2 == 0 %}g{%endif%}">{{ pieces[i] | safe}}</label>
		{% endfor %}
		</span>
	{% endfor %}
	</span>
{% endfor %}
{% for i in range(0,32) %}
	<input type="radio" name="p{{i}}" id="po{{i}}"></input>
	{% for r in range(0,8) %}
		{% for c in range(0,8) %}
			<input type="radio" name="p{{i}}" class="r{{r}} c{{c}} {{ types[i] | safe}}" id="pb{{i}}-{{r}}{{c}}" {% if initial[i] == r*8 + c %}checked{% endif %}></input>
			<label for="pa{{i}}-{{r}}{{c}}" class="r{{r}} c{{c}} {% if (r + c) % 2 == 0 %}g{%endif%}">{{ pieces[i] | safe}}</label>
			<label for="po{{i}}" class="off r{{r}} c{{c}}">{{ pieces[i] | safe}}</label>
		{% endfor %}
	{% endfor %}
	
	
{% endfor %}

{% for r in range(0,8) %}
	{% for c in range(0,8) %}
		<div class="blocker left r{{r}} c{{c}}"></div>
		<div class="blocker right r{{r}} c{{c}}"></div>
		<div class="blocker top r{{r}} c{{c}}"></div>
		<div class="blocker bottom r{{r}} c{{c}}"></div>
		<div class="blocker topleft r{{r}} c{{c}}"></div>
		<div class="blocker topright r{{r}} c{{c}}"></div>
		<div class="blocker bottomleft r{{r}} c{{c}}"></div>
		<div class="blocker bottomright r{{r}} c{{c}}"></div>
	{% endfor %}
{% endfor %}


</body>
</html>







