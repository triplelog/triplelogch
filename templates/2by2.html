{% extends "templates/4by4.html" %}

{% macro horizontalCover(top,right,zIndex,cellSize,leftRight) %}
<div style="direction: ltr; flex-wrap: wrap; {% if leftRight == 1 %}flex-direction: row-reverse; {% endif %}position: fixed; bottom: calc((7 - {{ top }}) * var(--block)); {% if leftRight == 1 %}left: calc({{ 14 + right }} * var(--block));{% else %}right: calc({{ 45 - right }} * var(--block));{% endif %} width: inherit; height: var(--block); z-index: {{ zIndex + 1 }}; background: transparent; ">
	{% if cellSize == 1 %}
	<div style="display: flex; flex-wrap: wrap; flex-grow: 0; flex-shrink: 0; width: 400%; right: 0px; position: absolute; height: 100%; top:0px; background: transparent;">
		<div style="width: calc(8 * var(--block)); height: var(--block); backdrop-filter: contrast(1); background: transparent; flex-grow: 1;"></div>
		<div style="width: calc(8 * var(--block)); height: var(--block); backdrop-filter: contrast(2); background: transparent; flex-grow: 1;"></div>
		<div style="width: calc(8 * var(--block)); height: var(--block); backdrop-filter: contrast(3); background: transparent; flex-grow: 1;"></div>
		<div style="width: calc(8 * var(--block)); height: var(--block); backdrop-filter: contrast(4); background: transparent; flex-grow: 1;"></div>
		<div style="width: calc(8 * var(--block)); height: var(--block); backdrop-filter: contrast(5); background: transparent; flex-grow: 1;"></div>
		<div style="width: calc(8 * var(--block)); height: var(--block); backdrop-filter: contrast(6); background: transparent; flex-grow: 1;"></div>
	</div>
	{% else %}
		<div style="width: calc(2 * var(--block)); height: var(--block); backdrop-filter: contrast(1); background: transparent; flex-grow: 1;"></div>
		<div style="width: calc(2 * var(--block)); height: var(--block); backdrop-filter: contrast(2); background: transparent; flex-grow: 1;"></div>
		<div style="width: calc(2 * var(--block)); height: var(--block); backdrop-filter: contrast(3); background: transparent; flex-grow: 1;"></div>
		<div style="width: calc(2 * var(--block)); height: var(--block); backdrop-filter: contrast(4); background: transparent; flex-grow: 1;"></div>
		<div style="width: calc(2 * var(--block)); height: var(--block); backdrop-filter: contrast(5); background: transparent; flex-grow: 1;"></div>
		<div style="width: calc(2 * var(--block)); height: var(--block); backdrop-filter: contrast(6); background: transparent; flex-grow: 1;"></div>

	{% endif %}
</div>
{% endmacro %}		
	
{% macro verticalCover(top,right,zIndex,cellSize,leftRight) %}
<div style="flex-wrap: wrap; flex-direction: column; position: fixed; bottom: calc((7 - {{ top }}) * var(--block)); right: calc({{ 45 - right }} * var(--block)); width: var(--block); height: inherit; z-index: {{ zIndex + 2 }}; background: transparent; ">
	{% if cellSize == 1 %}
	<div style="display: flex; flex-wrap: wrap; flex-direction: column; flex-grow: 0; flex-shrink: 0; width: calc(120 * var(--block)); right: calc(-60 * var(--block)); position: absolute; height: 100%; top:0px; background: transparent;">
		<div style="width: calc(120 * var(--block)); height: calc(2 * var(--block)); backdrop-filter: contrast(1); background: transparent; flex-grow: 1;"></div>
		<div style="width: calc(120 * var(--block)); height: calc(2 * var(--block)); backdrop-filter: contrast(2); background: transparent; flex-grow: 1;"></div>
		<div style="width: calc(120 * var(--block)); height: calc(2 * var(--block)); backdrop-filter: contrast(3); background: transparent; flex-grow: 1;"></div>
		<div style="width: calc(120 * var(--block)); height: calc(2 * var(--block)); backdrop-filter: contrast(4); background: transparent; flex-grow: 1;"></div>
		<div style="width: calc(120 * var(--block)); height: calc(2 * var(--block)); backdrop-filter: contrast(5); background: transparent; flex-grow: 1;"></div>
		<div style="width: calc(120 * var(--block)); height: calc(2 * var(--block)); backdrop-filter: contrast(6); background: transparent; flex-grow: 1;"></div>
	</div>
	{% else %}
		<div style="width: calc(1 * var(--block)); height: calc(2 * var(--block)); backdrop-filter: contrast(1); background: transparent; flex-grow: 1;"></div>
		<div style="width: calc(1 * var(--block)); height: calc(2 * var(--block)); backdrop-filter: contrast(2); background: transparent; flex-grow: 1;"></div>
		<div style="width: calc(1 * var(--block)); height: calc(2 * var(--block)); backdrop-filter: contrast(3); background: transparent; flex-grow: 1;"></div>
		<div style="width: calc(1 * var(--block)); height: calc(2 * var(--block)); backdrop-filter: contrast(4); background: transparent; flex-grow: 1;"></div>
		<div style="width: calc(1 * var(--block)); height: calc(2 * var(--block)); backdrop-filter: contrast(5); background: transparent; flex-grow: 1;"></div>
		<div style="width: calc(1 * var(--block)); height: calc(2 * var(--block)); backdrop-filter: contrast(6); background: transparent; flex-grow: 1;"></div>

	{% endif %}
</div>
{% endmacro %}	

{% macro 2by2(id1,id2) %}


<div class="topBottom">
	<div {% if (id1 == 2 or id1 == 3) and (id2 == 1 or id2 == 3) %}class="vflex"{% else %}class="vresize"{% endif %}>
		{% if (id1 == 2 or id1 == 3) and (id2 == 1 or id2 == 3) %}
		{% else %}
		
		
		<div class="verticalGrow">
			{% set top = (id1 - (id1 % 2)) / 2 * 4 %}
			{% set top = top + (id2 % 2) * 2 %}
			{% set top = top + 0 %}
			{% set right = (id1 % 2) * 4 %}
			{% set right = right + (id2 - (id2 % 2)) / 2 * 2 %}
			{% set right = right + 0 %}
			{% set zIndex = (top)*800+100 + (7-right)*100 %}
			{% set cellSize = 1 %}
			{% set leftRight = 0 %}
		
			{% if id1 == 0 or id1 == 1 %}
			{% set widthHeight = "width: var(--block); height: var(--block);" %}
			{% set cellSize = 0 %}
			{% elif id1 == 2 and id2 == 3 %}
			{% set zIndex = 4100 + 4*100 %}
			{% set top = 4.25 + 4.0/4 %}
			{% set right = 5 %}
			{% set widthHeight = "width: calc(4 * var(--block)); height: calc(var(--block) / 3);" %}
			{% elif id1 == 3 and id2 == 1 %}
			{% set zIndex = 4100 + 6*100 %}
			{% set top = 4.25 + 6.0/4 %}
			{% set right = 5 %}
			{% set widthHeight = "width: calc(4 * var(--block)); height: calc(var(--block) / 3);" %}
			{% else %}
			{% set widthHeight = "width: var(--block); height: var(--block);" %}
			{% set cellSize = 0 %}
			{% endif %}
		
			{% if id1 == 2 and id2 == 1 %}
			{% set zIndex = 6200 %}
			{% elif id1 == 3 and id2 == 3 %}
			{% set zIndex = 5500 %}
			{% set leftRight = 1 %}
			{% endif %}
			{{ verticalCover(top,right,zIndex,cellSize,leftRight) }}
			
			{% set top = (id1 - (id1 % 2)) / 2 * 4 %}
			{% set top = top + (id2 % 2) * 2 %}
			{% set top = top + 0 %}
			{% set right = (id1 % 2) * 4 %}
			{% set right = right + (id2 - (id2 % 2)) / 2 * 2 %}
			{% set right = right + 1 %}
			{% set zIndex = (top)*800+100 + (7-right)*100 %}
			{% set cellSize = 1 %}
			{% set leftRight = 0 %}
			
			{% if id1 == 0 or id1 == 1 %}
			{% set widthHeight = "width: var(--block); height: var(--block);" %}
			{% set cellSize = 0 %}
			{% elif id1 == 2 and id2 == 3 %}
			{% set zIndex = 4100 + 5*100 %}
			{% set top = 4.25 + 5.0/4 %}
			{% set right = 5 %}
			{% set widthHeight = "width: calc(4 * var(--block)); height: calc(var(--block) / 3);" %}
			{% elif id1 == 3 and id2 == 1 %}
			{% set zIndex = 4100 + 7*100 %}
			{% set top = 4.25 + 7.0/4 %}
			{% set right = 5 %}
			{% set widthHeight = "width: calc(4 * var(--block)); height: calc(var(--block) / 3);" %}
			{% else %}
			{% set widthHeight = "width: var(--block); height: var(--block);" %}
			{% set cellSize = 0 %}
			{% endif %}
			
			{% if id1 == 2 and id2 == 1 %}
			{% set zIndex = 6100 %}
			{% elif id1 == 3 and id2 == 3 %}
			{% set leftRight = 1 %}
			{% set zIndex = 5600 %}
			{% endif %}
			{{ verticalCover(top,right,zIndex,cellSize,leftRight) }}
		</div>
		{% endif %}
		<div class="leftRight">
			
			<div {% if id2 == 0 or id2 == 1 %}class="hresize"{% else %}class="hflex"{% endif %}>
				
				{% set top = (id1 - (id1 % 2)) / 2 * 4 %}
				{% set top = top + (id2 % 2) * 2 %}
				{% set top = top + 0 %}
				{% set right = (id1 % 2) * 4 %}
				{% set right = right + (id2 - (id2 % 2)) / 2 * 2 %}
				{% set right = right + 0 %}
				{% set zIndex = (top)*800+100 + (7-right)*100 %}
				{% set cellSize = 1 %}
				{% set leftRight = 0 %}
				
				{% if id1 == 0 or id1 == 1 %}
				{% set widthHeight = "width: var(--block); height: var(--block);" %}
				{% set cellSize = 0 %}
				{% elif id1 == 2 and id2 == 3 %}
				{% set zIndex = 4100 + 4*100 %}
				{% set top = 4.25 + 4.0/4 %}
				{% set right = 5 %}
				{% set widthHeight = "width: calc(4 * var(--block)); height: calc(var(--block) / 3);" %}
				{% elif id1 == 3 and id2 == 1 %}
				{% set zIndex = 4100 + 6*100 %}
				{% set top = 4.25 + 6.0/4 %}
				{% set right = 5 %}
				{% set widthHeight = "width: calc(4 * var(--block)); height: calc(var(--block) / 3);" %}
				{% else %}
				{% set widthHeight = "width: var(--block); height: var(--block);" %}
				{% set cellSize = 0 %}
				{% endif %}
				
				{% if id1 == 2 and id2 == 1 %}
				{% set zIndex = 6200 %}
				{% elif id1 == 3 and id2 == 3 %}
				{% set zIndex = 5500 %}
				{% set leftRight = 1 %}
				{% endif %}
				
				<div class="zoneCell cell-{{ id1 }}{{ id2 }}0">
					<label class="deleteButton" for="blank-{{ id1 }}{{ id2 }}0">Blank-{{ zi[id1][id2][0] }}-{{ ziSum[id1][id2][0] }}-{{ zIndex }}</label>
					<label class="sfhButton" for="sfh-{{ id1 }}{{ id2 }}0"></label>
					<label class="mfhButton" for="mfh-{{ id1 }}{{ id2 }}0"></label>
					
				</div>
				
				
				{% for zii in range(0,1) %}
				{% set zIndex = zIndex + 5 %}
				<div class="scoreColor" style="backdrop-filter: contrast(1); opacity: {{ 1.0/(zii + 1.0) }}; z-index: {{ zIndex }}; position: fixed; bottom: calc((7 - {{ top }}) * var(--block)); right: calc({{ 45 - right }} * var(--block)); {{ widthHeight }}"></div>
				{% endfor %}
				
				{% if id2 == 0 or id2 == 1 %}
				<div class="horizontalGrow">
					
					{{ horizontalCover(top,right,zIndex,cellSize,leftRight) }}
					
				</div>
				{% endif %}
				
				{{ sfh(id1*200 + id2*20) }}
				{{ mfh(id1,id2,0) }}
			</div>
			<div class="vroad" style="z-index: {{ id1*200 + id2*20 + 1 }};">
				
			</div>
			
			<div {% if id2 == 2 or id2 == 3 %}class="hresize"{% else %}class="hflex"{% endif %}>
				
				{% set top = (id1 - (id1 % 2)) / 2 * 4 %}
				{% set top = top + (id2 % 2) * 2 %}
				{% set top = top + 0 %}
				{% set right = (id1 % 2) * 4 %}
				{% set right = right + (id2 - (id2 % 2)) / 2 * 2 %}
				{% set right = right + 1 %}
				{% set zIndex = (top)*800+100 + (7-right)*100 %}
				{% set cellSize = 1 %}
				{% set leftRight = 0 %}
				
				{% if id1 == 0 or id1 == 1 %}
				{% set widthHeight = "width: var(--block); height: var(--block);" %}
				{% set cellSize = 0 %}
				{% elif id1 == 2 and id2 == 3 %}
				{% set zIndex = 4100 + 5*100 %}
				{% set top = 4.25 + 5.0/4 %}
				{% set right = 5 %}
				{% set widthHeight = "width: calc(4 * var(--block)); height: calc(var(--block) / 3);" %}
				{% elif id1 == 3 and id2 == 1 %}
				{% set zIndex = 4100 + 7*100 %}
				{% set top = 4.25 + 7.0/4 %}
				{% set right = 5 %}
				{% set widthHeight = "width: calc(4 * var(--block)); height: calc(var(--block) / 3);" %}
				{% else %}
				{% set widthHeight = "width: var(--block); height: var(--block);" %}
				{% set cellSize = 0 %}
				{% endif %}
				
				{% if id1 == 2 and id2 == 1 %}
				{% set zIndex = 6100 %}
				{% elif id1 == 3 and id2 == 3 %}
				{% set leftRight = 1 %}
				{% set zIndex = 5600 %}
				{% endif %}
				
				<div class="zoneCell cell-{{ id1 }}{{ id2 }}1">
					<label class="deleteButton" for="blank-{{ id1 }}{{ id2 }}1">Blank-{{ zi[id1][id2][1] }}-{{ ziSum[id1][id2][1] }}-{{ zIndex }}</label>
					<label class="sfhButton" for="sfh-{{ id1 }}{{ id2 }}1"></label>
					<label class="mfhButton" for="mfh-{{ id1 }}{{ id2 }}1"></label>
					
				</div>
				
				
				{% for zii in range(0,zi[id1][id2][1]) %}
				{% set zIndex = zIndex + 5 %}
				<div class="scoreColor" style="backdrop-filter: contrast(1); opacity: {{ 1.0/(zii + 1.0) }}; z-index: {{ zIndex }}; position: fixed; bottom: calc((7 - {{ top }}) * var(--block)); right: calc({{ 45 - right }} * var(--block)); {{ widthHeight }}"></div>
				{% endfor %}
				
				{% if id2 == 2 or id2 == 3 %}
				<div class="horizontalGrow" style="direction: rtl;">
					
					{{ horizontalCover(top,right,zIndex,cellSize,leftRight) }}
					
				</div>
				{% endif %}
				{{ sfh(id1,id2,1) }}
				{{ mfh(id1,id2,1) }}
			</div>
		</div>
		
	</div>
	<div class="hroad" style="z-index: {{ id1*200 + id2*20 + 3}};">
	</div>
	<div {% if (id1 == 2 or id1 == 3) and (id2 == 1 or id2 == 3) %}class="vresize"{% else %}class="vflex"{% endif %}>

		<div class="leftRight">
			
			<div {% if id2 == 0 or id2 == 1 %}class="hresize"{% else %}class="hflex"{% endif %}>
				
				{% set rem = (id2*4 + 2) % 8 %}
				{% set top = (id1 - (id1 % 2)) / 2 * 4 %}
				{% set top = top + (id2 % 2) * 2 %}
				{% set top = top + 1 %}
				{% set right = (id1 % 2) * 4 %}
				{% set right = right + (id2 - (id2 % 2)) / 2 * 2 %}
				{% set right = right + 0 %}
				{% set zIndex = (top)*800+100 + (7-right)*100 %}
				{% set cellSize = 1 %}
				{% set leftRight = 0 %}
				
				{% if id1 == 0 or id1 == 1 %}
				{% set widthHeight = "width: var(--block); height: var(--block);" %}
				{% elif id1 == 2 and id2 == 3 %}
				{% set zIndex = 4100 + 8*100 %}
				{% set top = 4.25 + 8.0/4 %}
				{% set right = 5 %}
				{% set widthHeight = "width: calc(4 * var(--block)); height: calc(var(--block) / 3);" %}
				{% elif id1 == 3 and id2 == 1 %}
				{% set zIndex = 4100 + 10*100 %}
				{% set top = 4.25 + 10.0/4 %}
				{% set right = 5 %}
				{% set widthHeight = "width: calc(4 * var(--block)); height: calc(var(--block) / 3);" %}
				{% elif id1 == 2 and id2 == 2 %}
				{% set zIndex = 4100 + 0*100 %}
				{% set top = 4.25 + 0.0/4 %}
				{% set right = 5 %}
				{% set widthHeight = "width: calc(4 * var(--block)); height: calc(var(--block) / 3);" %}
				{% elif id1 == 3 and id2 == 0 %}
				{% set zIndex = 4100 + 2*100 %}
				{% set top = 4.25 + 2.0/4 %}
				{% set right = 5 %}
				{% set widthHeight = "width: calc(4 * var(--block)); height: calc(var(--block) / 3);" %}
				{% else %}
				{% set widthHeight = "width: var(--block); height: var(--block);" %}
				{% endif %}
				
				{% if id1 == 2 and id2 == 1 %}
				{% set zIndex = 6400 %}
				{% elif id1 == 3 and id2 == 3 %}
				{% set zIndex = 5700 %}
				{% elif id1 == 2 and id2 == 0 %}
				{% set zIndex = 6000 %}
				{% elif id1 == 3 and id2 == 2 %}
				{% set zIndex = 5300 %}
				{% endif %}
				
				<div class="zoneCell cell-{{ id1 }}{{ id2 }}2">
					<label class="deleteButton" for="blank-{{ id1 }}{{ id2 }}2">Blank-{{ zi[id1][id2][2] }}-{{ ziSum[id1][id2][2] }}-{{ zIndex }}</label>
					<label class="sfhButton" for="sfh-{{ id1 }}{{ id2 }}2"></label>
					<label class="mfhButton" for="mfh-{{ id1 }}{{ id2 }}2"></label>
					
				</div>
				
				
				{% for zii in range(0,zi[id1][id2][2]) %}
				{% set zIndex = zIndex + 5 %}
				<div class="scoreColor" style="backdrop-filter: contrast(1); opacity: {{ 1.0/(zii + 1.0) }}; z-index: {{ zIndex }}; position: fixed; bottom: calc((7 - {{ top }}) * var(--block)); right: calc({{ 45 - right }} * var(--block)); {{ widthHeight }}"></div>
				{% endfor %}
				
				
				{% if id2 == 0 or id2 == 1 %}
				<div class="horizontalGrow">
					{{ horizontalCover(top,right,zIndex,cellSize,leftRight) }}
				</div>
				{% endif %}
				{{ sfh(angle1 + angle3 + angle4,id1,id2,2) }}
				{{ mfh(angle1 + angle3 + angle4,id1,id2,2) }}
				
			</div>
			<div class="vroad" style="z-index: {{ id1*200 + id2*20 + 5 }};">
				
			</div>
			<div {% if id2 == 2 or id2 == 3 %}class="hresize"{% else %}class="hflex"{% endif %}>
				
				
				{% set top = (id1 - (id1 % 2)) / 2 * 4 %}
				{% set top = top + (id2 % 2) * 2 %}
				{% set top = top + 1 %}
				{% set right = (id1 % 2) * 4 %}
				{% set right = right + (id2 - (id2 % 2)) / 2 * 2 %}
				{% set right = right + 1 %}
				{% set zIndex = (top)*800+100 + (7-right)*100 %}
				{% set cellSize = 1 %}
				{% set leftRight = 0 %}
				
				{% if id1 == 0 or id1 == 1 %}
				{% set widthHeight = "width: var(--block); height: var(--block);" %}
				{% elif id1 == 2 and id2 == 3 %}
				{% set zIndex = 4100 + 9*100 %}
				{% set top = 4.25 + 9.0/4 %}
				{% set right = 5 %}
				{% set widthHeight = "width: calc(4 * var(--block)); height: calc(var(--block) / 3);" %}
				{% elif id1 == 3 and id2 == 1 %}
				{% set zIndex = 4100 + 11*100 %}
				{% set top = 4.25 + 11.0/4 %}
				{% set right = 5 %}
				{% set widthHeight = "width: calc(4 * var(--block)); height: calc(var(--block) / 3);" %}
				{% elif id1 == 2 and id2 == 2 %}
				{% set zIndex = 4100 + 1*100 %}
				{% set top = 4.25 + 1.0/4 %}
				{% set right = 5 %}
				{% set widthHeight = "width: calc(4 * var(--block)); height: calc(var(--block) / 3);" %}
				{% elif id1 == 3 and id2 == 0 %}
				{% set zIndex = 4100 + 3*100 %}
				{% set top = 4.25 + 3.0/4 %}
				{% set right = 5 %}
				{% set widthHeight = "width: calc(4 * var(--block)); height: calc(var(--block) / 3);" %}
				{% else %}
				{% set widthHeight = "width: var(--block); height: var(--block);" %}
				{% endif %}
				
				{% if id1 == 2 and id2 == 1 %}
				{% set zIndex = 6300 %}
				{% elif id1 == 3 and id2 == 3 %}
				{% set zIndex = 5800 %}
				{% elif id1 == 2 and id2 == 0 %}
				{% set zIndex = 5900 %}
				{% elif id1 == 3 and id2 == 2 %}
				{% set zIndex = 5400 %}
				{% endif %}
				
				<div class="zoneCell cell-{{ id1 }}{{ id2 }}3">
					<label class="deleteButton" for="blank-{{ id1 }}{{ id2 }}3">Blank-{{ zi[id1][id2][3] }}-{{ ziSum[id1][id2][3] }}-{{ zIndex }}</label>
					<label class="sfhButton" for="sfh-{{ id1 }}{{ id2 }}3"></label>
					<label class="mfhButton" for="mfh-{{ id1 }}{{ id2 }}3"></label>
					
				</div>
				
				
				{% for zii in range(0,zi[id1][id2][3]) %}
				{% set zIndex = zIndex + 5 %}
				<div class="scoreColor" style="backdrop-filter: contrast(1); opacity: {{ 1.0/(zii + 1.0) }}; z-index: {{ zIndex }}; position: fixed; bottom: calc((7 - {{ top }}) * var(--block)); right: calc({{ 45 - right }} * var(--block)); {{ widthHeight }}"></div>
				{% endfor %}
				
				
				{% if id2 == 2 or id2 == 3 %}
				<div class="horizontalGrow" style="direction: rtl;">
					{{ horizontalCover(top,right,zIndex,cellSize,leftRight) }}
				</div>
				{% endif %}
				
				{{ sfh(angle1 + angle3 + angle4,id1,id2,3) }}
				{{ mfh(angle1 + angle3 + angle4,id1,id2,3) }}
			</div>
		</div>

		{% if (id1 == 2 or id1 == 3) and (id2 == 1 or id2 == 3) %}
		<div class="verticalGrow" style="transform: rotate(180deg); right: -50%;"></div>
		{% endif %}
		
	</div>
</div>
{% endmacro %}

{% macro zoneButtons(name) %}
	{% for i in range(0,4) %}
		{% for ii in range(0,4) %}
			{% for iii in range(0,4) %}
			<input type="radio" style="display: none;" name="cell-{{ i }}{{ ii }}{{ iii }}" id="blank-{{ i }}{{ ii }}{{ iii }}" checked>
			<input type="radio" style="display: none;" name="cell-{{ i }}{{ ii }}{{ iii }}" id="sfh-{{ i }}{{ ii }}{{ iii }}">
			<input type="radio" style="display: none;" name="cell-{{ i }}{{ ii }}{{ iii }}" id="mfh-{{ i }}{{ ii }}{{ iii }}">
			{% endfor %}
		{% endfor %}
	{% endfor %}
{% endmacro %}