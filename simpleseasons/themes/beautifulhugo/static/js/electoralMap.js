/* Translation maps */

/* Return a query parameter from a URL */
var getParameterByName = function (name, url) {
  if (!url) {
    url = window.location.href;
  }
  name = name.replace(/[\[\]]/g, "\\$&");
  var regex = new RegExp("[?&]" + name + "(=([^&#]*)|&|#|$)"),
      results = regex.exec(url);
  if (!results) return null;
  if (!results[2]) return '';
  return decodeURIComponent(results[2].replace(/\+/g, " "));
}

/* Splits based on 2012 vs 2016 data */

var year = null,
    loser = null,
    dataFile = '../../data/usStateFull.json',
    data = {},
    goalState = 'US',
    oldStates = [],
    idToState = {},
    otherMap = 2012,
    partyToCandidate = null;

function setGoalState(){
	goalState = event.target.value;
	update();
}

var setYear = function(newYear) {
  document.getElementById("selectYear").style.display = "none";
  otherMap = newYear;
  update();
}




var numberToLetter = 'abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ'.split('');

var letterToNumber = {};
for (var i=0; i<numberToLetter.length; ++i) {
  letterToNumber[numberToLetter[i]] = i;
}
var countyToState = {}

var stateData = {"02": {"abbrev": "AK", "name": "Alaska", "pop": 721523, "reps": 1, "ev": 3, "1976": {"dem": 44058, "gop": 71555, "oth": 6785}, "1980": {"dem": 41842, "gop": 86112, "oth": 18479}, "1984": {"dem": 62007, "gop": 138377, "oth": 6378}, "1988": {"dem": 72584, "gop": 119251, "oth": 5484}, "1992": {"dem": 78294, "gop": 102000, "oth": 73481}, "1996": {"dem": 80380, "gop": 122746, "oth": 26333}, "2000": {"dem": 79004, "gop": 167398, "oth": 28747}, "2004": {"dem": 111025, "gop": 190889, "oth": 5069}, "2008": {"dem": 123594, "gop": 193841, "oth": 3783}, "2012": {"dem": 122640, "gop": 164676, "oth": 7392}, "2016": {"dem": 116454, "gop": 163387, "oth": 18725}}, "01": {"abbrev": "AL", "name": "Alabama", "pop": 4802982, "reps": 7, "ev": 9, "1976": {"dem": 659170, "gop": 504070, "oth": 9198}, "1980": {"dem": 636730, "gop": 654192, "oth": 16481}, "1984": {"dem": 551899, "gop": 872849, "oth": 9504}, "1988": {"dem": 549506, "gop": 815576, "oth": 8460}, "1992": {"dem": 690080, "gop": 804283, "oth": 183109}, "1996": {"dem": 662165, "gop": 769044, "oth": 95030}, "2000": {"dem": 692611, "gop": 941173, "oth": 25896}, "2004": {"dem": 693933, "gop": 1176394, "oth": 12190}, "2008": {"dem": 813479, "gop": 1266546, "oth": 16089}, "2012": {"dem": 795696, "gop": 1255925, "oth": 18706}, "2016": {"dem": 729547, "gop": 1318255, "oth": 44467}}, "05": {"abbrev": "AR", "name": "Arkansas", "pop": 2926229, "reps": 4, "ev": 6, "1976": {"dem": 498604, "gop": 267903, "oth": 639}, "1980": {"dem": 398041, "gop": 403164, "oth": 22468}, "1984": {"dem": 338646, "gop": 534774, "oth": 2221}, "1988": {"dem": 349237, "gop": 466578, "oth": 5146}, "1992": {"dem": 505823, "gop": 337324, "oth": 99132}, "1996": {"dem": 475171, "gop": 325416, "oth": 69884}, "2000": {"dem": 422768, "gop": 472940, "oth": 13421}, "2004": {"dem": 469953, "gop": 572898, "oth": 6171}, "2008": {"dem": 422310, "gop": 638017, "oth": 12882}, "2012": {"dem": 394409, "gop": 647744, "oth": 16276}, "2016": {"dem": 380494, "gop": 684872, "oth": 29829}}, "04": {"abbrev": "AZ", "name": "Arizona", "pop": 6412700, "reps": 9, "ev": 11, "1976": {"dem": 295602, "gop": 418642, "oth": 19229}, "1980": {"dem": 246843, "gop": 529688, "oth": 76952}, "1984": {"dem": 333854, "gop": 681416, "oth": 10585}, "1988": {"dem": 454029, "gop": 702541, "oth": 13351}, "1992": {"dem": 543050, "gop": 572086, "oth": 353741}, "1996": {"dem": 653288, "gop": 622073, "oth": 112072}, "2000": {"dem": 685341, "gop": 781652, "oth": 45645}, "2004": {"dem": 893524, "gop": 1104294, "oth": 11856}, "2008": {"dem": 1034707, "gop": 1230111, "oth": 12555}, "2012": {"dem": 1025232, "gop": 1233654, "oth": 32100}, "2016": {"dem": 1161167, "gop": 1252401, "oth": 106327}}, "06": {"abbrev": "CA", "name": "California", "pop": 37341989, "reps": 53, "ev": 55, "1976": {"dem": 3742284, "gop": 3882244, "oth": 56388}, "1980": {"dem": 3082943, "gop": 4522994, "oth": 739618}, "1984": {"dem": 3922519, "gop": 5467009, "oth": 49951}, "1988": {"dem": 4702233, "gop": 5054917, "oth": 70105}, "1992": {"dem": 5121325, "gop": 3630574, "oth": 2296006}, "1996": {"dem": 5119835, "gop": 3828381, "oth": 697847}, "2000": {"dem": 5861203, "gop": 4567429, "oth": 418707}, "2004": {"dem": 6745485, "gop": 5509826, "oth": 50165}, "2008": {"dem": 8274473, "gop": 5011781, "oth": 108381}, "2012": {"dem": 7854285, "gop": 4839958, "oth": 143221}, "2016": {"dem": 8753788, "gop": 4483810, "oth": 478500}}, "08": {"abbrev": "CO", "name": "Colorado", "pop": 5044930, "reps": 7, "ev": 9, "1976": {"dem": 460801, "gop": 584278, "oth": 26047}, "1980": {"dem": 368009, "gop": 652264, "oth": 130633}, "1984": {"dem": 454975, "gop": 821817, "oth": 11257}, "1988": {"dem": 621453, "gop": 728177, "oth": 15482}, "1992": {"dem": 629681, "gop": 562850, "oth": 366010}, "1996": {"dem": 671152, "gop": 691848, "oth": 99629}, "2000": {"dem": 738227, "gop": 883748, "oth": 91434}, "2004": {"dem": 1001732, "gop": 1101255, "oth": 12718}, "2008": {"dem": 1288576, "gop": 1073589, "oth": 13350}, "2012": {"dem": 1323101, "gop": 1185243, "oth": 35545}, "2016": {"dem": 1338870, "gop": 1202484, "oth": 144121}}, "09": {"abbrev": "CT", "name": "Connecticut", "pop": 3581628, "reps": 5, "ev": 7, "1976": {"dem": 647895, "gop": 719261, "oth": 10309}, "1980": {"dem": 541732, "gop": 677210, "oth": 171807}, "1984": {"dem": 569597, "gop": 890877, "oth": 4826}, "1988": {"dem": 676584, "gop": 750241, "oth": 14071}, "1992": {"dem": 682318, "gop": 578313, "oth": 348771}, "1996": {"dem": 735740, "gop": 483109, "oth": 139523}, "2000": {"dem": 816015, "gop": 561094, "oth": 64452}, "2004": {"dem": 857488, "gop": 693826, "oth": 12969}, "2008": {"dem": 997772, "gop": 629428, "oth": 19162}, "2012": {"dem": 905083, "gop": 634892, "oth": 12340}, "2016": {"dem": 897572, "gop": 673215, "oth": 48676}}, "11": {"abbrev": "DC", "name": "Washington, D.C.", "pop": 600000, "reps": 1, "ev": 3, "1976": {"dem": 137818, "gop": 27873, "oth": 1656}, "1980": {"dem": 130231, "gop": 23313, "oth": 16131}, "1984": {"dem": 180408, "gop": 29009, "oth": 809}, "1988": {"dem": 159407, "gop": 27590, "oth": 3064}, "1992": {"dem": 192619, "gop": 20698, "oth": 9681}, "1996": {"dem": 158220, "gop": 17339, "oth": 4780}, "2000": {"dem": 171923, "gop": 18073, "oth": 10576}, "2004": {"dem": 202970, "gop": 21256, "oth": 1485}, "2008": {"dem": 245800, "gop": 17367, "oth": 1138}, "2012": {"dem": 267070, "gop": 21381, "oth": 2458}, "2016": {"dem": 282830, "gop": 12723, "oth": 6551}}, "10": {"abbrev": "DE", "name": "Delaware", "pop": 900877, "reps": 1, "ev": 3, "1976": {"dem": 122461, "gop": 109780, "oth": 2432}, "1980": {"dem": 105754, "gop": 111252, "oth": 16288}, "1984": {"dem": 101656, "gop": 152190, "oth": 269}, "1988": {"dem": 108647, "gop": 139639, "oth": 1162}, "1992": {"dem": 126054, "gop": 102313, "oth": 59213}, "1996": {"dem": 140355, "gop": 99062, "oth": 28719}, "2000": {"dem": 180068, "gop": 137288, "oth": 8307}, "2004": {"dem": 200152, "gop": 171660, "oth": 2153}, "2008": {"dem": 255459, "gop": 152374, "oth": 2401}, "2012": {"dem": 242584, "gop": 165484, "oth": 3882}, "2016": {"dem": 235603, "gop": 185127, "oth": 14757}}, "12": {"abbrev": "FL", "name": "Florida", "pop": 18900773, "reps": 27, "ev": 29, "1976": {"dem": 1636000, "gop": 1469531, "oth": 23643}, "1980": {"dem": 1419475, "gop": 2046951, "oth": 189692}, "1984": {"dem": 1448816, "gop": 2730350, "oth": 885}, "1988": {"dem": 1656701, "gop": 2618885, "oth": 19796}, "1992": {"dem": 2071698, "gop": 2173310, "oth": 1053067}, "1996": {"dem": 2546870, "gop": 2244536, "oth": 483870}, "2000": {"dem": 2912253, "gop": 2912790, "oth": 97488}, "2004": {"dem": 3583544, "gop": 3964522, "oth": 32971}, "2008": {"dem": 4282074, "gop": 4045624, "oth": 28124}, "2012": {"dem": 4237756, "gop": 4163447, "oth": 44726}, "2016": {"dem": 4504975, "gop": 4617886, "oth": 207043}}, "13": {"abbrev": "GA", "name": "Georgia", "pop": 9727566, "reps": 14, "ev": 16, "1976": {"dem": 979409, "gop": 483743, "oth": 0}, "1980": {"dem": 890955, "gop": 654168, "oth": 36055}, "1984": {"dem": 706628, "gop": 1068722, "oth": 753}, "1988": {"dem": 714792, "gop": 1081331, "oth": 8435}, "1992": {"dem": 1008966, "gop": 995252, "oth": 309657}, "1996": {"dem": 1053849, "gop": 1080843, "oth": 146337}, "2000": {"dem": 1116230, "gop": 1419720, "oth": 36332}, "2004": {"dem": 1366149, "gop": 1914254, "oth": 18387}, "2008": {"dem": 1844123, "gop": 2048759, "oth": 28731}, "2012": {"dem": 1773827, "gop": 2078688, "oth": 45324}, "2016": {"dem": 1877963, "gop": 2089104, "oth": 125306}}, "15": {"abbrev": "HI", "name": "Hawaii", "pop": 1366862, "reps": 2, "ev": 4, "1976": {"dem": 147375, "gop": 140003, "oth": 3923}, "1980": {"dem": 135879, "gop": 130112, "oth": 32021}, "1984": {"dem": 147154, "gop": 185050, "oth": 2167}, "1988": {"dem": 192364, "gop": 158625, "oth": 1999}, "1992": {"dem": 179310, "gop": 136822, "oth": 53003}, "1996": {"dem": 205012, "gop": 113943, "oth": 27358}, "2000": {"dem": 205286, "gop": 137845, "oth": 21623}, "2004": {"dem": 231708, "gop": 194191, "oth": 1737}, "2008": {"dem": 325871, "gop": 120566, "oth": 3825}, "2012": {"dem": 306658, "gop": 121015, "oth": 3840}, "2016": {"dem": 266891, "gop": 128847, "oth": 15954}}, "19": {"abbrev": "IA", "name": "Iowa", "pop": 3053787, "reps": 4, "ev": 6, "1976": {"dem": 619931, "gop": 632864, "oth": 20057}, "1980": {"dem": 508672, "gop": 676026, "oth": 115633}, "1984": {"dem": 605620, "gop": 703088, "oth": 6248}, "1988": {"dem": 670557, "gop": 545355, "oth": 3526}, "1992": {"dem": 586353, "gop": 504891, "oth": 253468}, "1996": {"dem": 620258, "gop": 492644, "oth": 105159}, "2000": {"dem": 638517, "gop": 634373, "oth": 37459}, "2004": {"dem": 741898, "gop": 751957, "oth": 6149}, "2008": {"dem": 828940, "gop": 682379, "oth": 8014}, "2012": {"dem": 822544, "gop": 730617, "oth": 12926}, "2016": {"dem": 653669, "gop": 800983, "oth": 59186}}, "16": {"abbrev": "ID", "name": "Idaho", "pop": 1573499, "reps": 2, "ev": 4, "1976": {"dem": 126549, "gop": 204151, "oth": 5935}, "1980": {"dem": 110192, "gop": 290699, "oth": 27058}, "1984": {"dem": 108510, "gop": 297523, "oth": 2823}, "1988": {"dem": 147272, "gop": 253881, "oth": 5313}, "1992": {"dem": 137013, "gop": 202645, "oth": 130395}, "1996": {"dem": 165443, "gop": 256595, "oth": 62518}, "2000": {"dem": 138637, "gop": 336937, "oth": 12292}, "2004": {"dem": 181098, "gop": 409235, "oth": 3844}, "2008": {"dem": 236440, "gop": 403012, "oth": 7175}, "2012": {"dem": 212787, "gop": 420911, "oth": 9453}, "2016": {"dem": 189765, "gop": 409055, "oth": 60748}}, "17": {"abbrev": "IL", "name": "Illinois", "pop": 12864380, "reps": 18, "ev": 20, "1976": {"dem": 2271295, "gop": 2364269, "oth": 55939}, "1980": {"dem": 1981413, "gop": 2358049, "oth": 346754}, "1984": {"dem": 2086499, "gop": 2707103, "oth": 10086}, "1988": {"dem": 2215940, "gop": 2310939, "oth": 14944}, "1992": {"dem": 2453350, "gop": 1734096, "oth": 840515}, "1996": {"dem": 2341744, "gop": 1587021, "oth": 346408}, "2000": {"dem": 2589026, "gop": 2019421, "oth": 103759}, "2004": {"dem": 2891550, "gop": 2345946, "oth": 32442}, "2008": {"dem": 3419348, "gop": 2031179, "oth": 30948}, "2012": {"dem": 3019512, "gop": 2135216, "oth": 56229}, "2016": {"dem": 3090729, "gop": 2146015, "oth": 209596}}, "18": {"abbrev": "IN", "name": "Indiana", "pop": 6501582, "reps": 9, "ev": 11, "1976": {"dem": 1014714, "gop": 1183958, "oth": 14048}, "1980": {"dem": 844197, "gop": 1255656, "oth": 111639}, "1984": {"dem": 841481, "gop": 1377230, "oth": 7617}, "1988": {"dem": 860643, "gop": 1297763, "oth": 10215}, "1992": {"dem": 848420, "gop": 989375, "oth": 455934}, "1996": {"dem": 887424, "gop": 1006693, "oth": 224299}, "2000": {"dem": 901980, "gop": 1245836, "oth": 18997}, "2004": {"dem": 969011, "gop": 1479438, "oth": 18058}, "2008": {"dem": 1374039, "gop": 1345648, "oth": 29257}, "2012": {"dem": 1152887, "gop": 1420543, "oth": 50111}, "2016": {"dem": 1033126, "gop": 1557286, "oth": 133993}}, "20": {"abbrev": "KS", "name": "Kansas", "pop": 2863813, "reps": 4, "ev": 6, "1976": {"dem": 430421, "gop": 502752, "oth": 13185}, "1980": {"dem": 326150, "gop": 566812, "oth": 68231}, "1984": {"dem": 333149, "gop": 677296, "oth": 3564}, "1988": {"dem": 422636, "gop": 554049, "oth": 16359}, "1992": {"dem": 390434, "gop": 449951, "oth": 312358}, "1996": {"dem": 387659, "gop": 583245, "oth": 92639}, "2000": {"dem": 399276, "gop": 622332, "oth": 37459}, "2004": {"dem": 434993, "gop": 736456, "oth": 9348}, "2008": {"dem": 514765, "gop": 699655, "oth": 10598}, "2012": {"dem": 440726, "gop": 692634, "oth": 20456}, "2016": {"dem": 427005, "gop": 671018, "oth": 55406}}, "21": {"abbrev": "KY", "name": "Kentucky", "pop": 4350606, "reps": 6, "ev": 8, "1976": {"dem": 615717, "gop": 531852, "oth": 8308}, "1980": {"dem": 617417, "gop": 635274, "oth": 31127}, "1984": {"dem": 539539, "gop": 821702, "oth": 3129}, "1988": {"dem": 580368, "gop": 734281, "oth": 4494}, "1992": {"dem": 665104, "gop": 617178, "oth": 203944}, "1996": {"dem": 636614, "gop": 623283, "oth": 120396}, "2000": {"dem": 638923, "gop": 872520, "oth": 23118}, "2004": {"dem": 712733, "gop": 1069439, "oth": 8856}, "2008": {"dem": 751985, "gop": 1048462, "oth": 15378}, "2012": {"dem": 679370, "gop": 1087190, "oth": 17063}, "2016": {"dem": 628854, "gop": 1202971, "oth": 53752}}, "22": {"abbrev": "LA", "name": "Louisiana", "pop": 4553962, "reps": 6, "ev": 8, "1976": {"dem": 661365, "gop": 587446, "oth": 10058}, "1980": {"dem": 708453, "gop": 792853, "oth": 26345}, "1984": {"dem": 651586, "gop": 1037299, "oth": 9502}, "1988": {"dem": 717460, "gop": 883702, "oth": 18612}, "1992": {"dem": 815971, "gop": 733386, "oth": 211478}, "1996": {"dem": 927837, "gop": 712586, "oth": 123293}, "2000": {"dem": 792344, "gop": 927871, "oth": 20473}, "2004": {"dem": 820299, "gop": 1102169, "oth": 7032}, "2008": {"dem": 782989, "gop": 1148275, "oth": 9368}, "2012": {"dem": 809141, "gop": 1152262, "oth": 18157}, "2016": {"dem": 780154, "gop": 1178638, "oth": 37978}}, "25": {"abbrev": "MA", "name": "Massachusetts", "pop": 6559644, "reps": 9, "ev": 11, "1976": {"dem": 1429475, "gop": 1030276, "oth": 65637}, "1980": {"dem": 1053802, "gop": 1057631, "oth": 382539}, "1984": {"dem": 1239606, "gop": 1310936, "oth": 7998}, "1988": {"dem": 1401415, "gop": 1194635, "oth": 24251}, "1992": {"dem": 1318639, "gop": 805039, "oth": 630731}, "1996": {"dem": 1571509, "gop": 718058, "oth": 227206}, "2000": {"dem": 1616487, "gop": 878502, "oth": 173564}, "2004": {"dem": 1803800, "gop": 1071109, "oth": 15067}, "2008": {"dem": 1904097, "gop": 1108854, "oth": 28841}, "2012": {"dem": 1921290, "gop": 1188314, "oth": 30920}, "2016": {"dem": 1995196, "gop": 1090893, "oth": 138018}}, "24": {"abbrev": "MD", "name": "Maryland", "pop": 5789929, "reps": 8, "ev": 10, "1976": {"dem": 759612, "gop": 672661, "oth": 0}, "1980": {"dem": 726161, "gop": 680606, "oth": 119537}, "1984": {"dem": 787935, "gop": 879918, "oth": 5721}, "1988": {"dem": 826304, "gop": 876167, "oth": 6748}, "1992": {"dem": 988571, "gop": 707094, "oth": 281414}, "1996": {"dem": 966207, "gop": 681530, "oth": 115812}, "2000": {"dem": 1144008, "gop": 813827, "oth": 53768}, "2004": {"dem": 1334493, "gop": 1024703, "oth": 11854}, "2008": {"dem": 1629467, "gop": 959862, "oth": 14713}, "2012": {"dem": 1677844, "gop": 971869, "oth": 30195}, "2016": {"dem": 1677928, "gop": 943169, "oth": 79605}}, "23": {"abbrev": "ME", "name": "Maine", "pop": 1333074, "reps": 2, "ev": 4, "1976": {"dem": 232279, "gop": 236320, "oth": 10874}, "1980": {"dem": 220974, "gop": 238522, "oth": 53327}, "1984": {"dem": 214515, "gop": 336500, "oth": 1292}, "1988": {"dem": 243569, "gop": 307131, "oth": 2700}, "1992": {"dem": 263420, "gop": 206504, "oth": 206820}, "1996": {"dem": 312788, "gop": 186378, "oth": 85970}, "2000": {"dem": 319951, "gop": 286616, "oth": 37127}, "2004": {"dem": 396842, "gop": 330201, "oth": 8069}, "2008": {"dem": 421923, "gop": 295273, "oth": 10636}, "2012": {"dem": 401306, "gop": 292276, "oth": 11578}, "2016": {"dem": 357735, "gop": 335593, "oth": 38105}}, "26": {"abbrev": "MI", "name": "Michigan", "pop": 9911626, "reps": 14, "ev": 16, "1976": {"dem": 1696714, "gop": 1893742, "oth": 47905}, "1980": {"dem": 1661532, "gop": 1915225, "oth": 275223}, "1984": {"dem": 1529638, "gop": 2251571, "oth": 10055}, "1988": {"dem": 1675783, "gop": 1965486, "oth": 18336}, "1992": {"dem": 1871182, "gop": 1554940, "oth": 824813}, "1996": {"dem": 1989653, "gop": 1481212, "oth": 336670}, "2000": {"dem": 2170418, "gop": 1953139, "oth": 84165}, "2004": {"dem": 2479183, "gop": 2313746, "oth": 24035}, "2008": {"dem": 2872579, "gop": 2048639, "oth": 33085}, "2012": {"dem": 2564569, "gop": 2115256, "oth": 21897}, "2016": {"dem": 2268839, "gop": 2279543, "oth": 172136}}, "27": {"abbrev": "MN", "name": "Minnesota", "pop": 5314879, "reps": 8, "ev": 10, "1976": {"dem": 1070440, "gop": 819395, "oth": 35490}, "1980": {"dem": 954173, "gop": 873268, "oth": 174997}, "1984": {"dem": 1036364, "gop": 1032603, "oth": 3865}, "1988": {"dem": 1109471, "gop": 962337, "oth": 5403}, "1992": {"dem": 1020997, "gop": 747841, "oth": 562506}, "1996": {"dem": 1120380, "gop": 766395, "oth": 257698}, "2000": {"dem": 1168266, "gop": 1109659, "oth": 126696}, "2004": {"dem": 1445014, "gop": 1346695, "oth": 18683}, "2008": {"dem": 1573354, "gop": 1275409, "oth": 30152}, "2012": {"dem": 1546167, "gop": 1320225, "oth": 35098}, "2016": {"dem": 1367705, "gop": 1322949, "oth": 112972}}, "29": {"abbrev": "MO", "name": "Missouri", "pop": 6011478, "reps": 8, "ev": 10, "1976": {"dem": 998387, "gop": 927443, "oth": 24029}, "1980": {"dem": 931182, "gop": 1074181, "oth": 77920}, "1984": {"dem": 848583, "gop": 1274188, "oth": 0}, "1988": {"dem": 1001619, "gop": 1084953, "oth": 6656}, "1992": {"dem": 1053873, "gop": 811159, "oth": 518741}, "1996": {"dem": 1025935, "gop": 890016, "oth": 217188}, "2000": {"dem": 1111138, "gop": 1189924, "oth": 38515}, "2004": {"dem": 1259171, "gop": 1455713, "oth": 9831}, "2008": {"dem": 1441911, "gop": 1445814, "oth": 17813}, "2012": {"dem": 1223796, "gop": 1482440, "oth": 43151}, "2016": {"dem": 1071068, "gop": 1594511, "oth": 97359}}, "28": {"abbrev": "MS", "name": "Mississippi", "pop": 2978240, "reps": 4, "ev": 6, "1976": {"dem": 381329, "gop": 366846, "oth": 6678}, "1980": {"dem": 429281, "gop": 441089, "oth": 12036}, "1984": {"dem": 352192, "gop": 582377, "oth": 2336}, "1988": {"dem": 363921, "gop": 557890, "oth": 6387}, "1992": {"dem": 400258, "gop": 487793, "oth": 85626}, "1996": {"dem": 394022, "gop": 439838, "oth": 53427}, "2000": {"dem": 404614, "gop": 572844, "oth": 8735}, "2004": {"dem": 457766, "gop": 672660, "oth": 3175}, "2008": {"dem": 554662, "gop": 724597, "oth": 4011}, "2012": {"dem": 562949, "gop": 710746, "oth": 6676}, "2016": {"dem": 485131, "gop": 700714, "oth": 14435}}, "30": {"abbrev": "MT", "name": "Montana", "pop": 994416, "reps": 1, "ev": 3, "1976": {"dem": 149259, "gop": 173703, "oth": 5772}, "1980": {"dem": 118032, "gop": 206814, "oth": 29281}, "1984": {"dem": 146742, "gop": 232450, "oth": 5185}, "1988": {"dem": 168936, "gop": 190412, "oth": 5047}, "1992": {"dem": 154507, "gop": 144207, "oth": 107225}, "1996": {"dem": 167922, "gop": 179652, "oth": 55229}, "2000": {"dem": 137126, "gop": 240178, "oth": 24437}, "2004": {"dem": 173710, "gop": 266063, "oth": 6168}, "2008": {"dem": 231667, "gop": 242763, "oth": 10638}, "2012": {"dem": 201839, "gop": 267928, "oth": 14165}, "2016": {"dem": 177709, "gop": 279240, "oth": 28037}}, "37": {"abbrev": "NC", "name": "North Carolina", "pop": 9565781, "reps": 13, "ev": 15, "1976": {"dem": 927365, "gop": 741960, "oth": 5607}, "1980": {"dem": 875635, "gop": 915018, "oth": 52800}, "1984": {"dem": 824287, "gop": 1346481, "oth": 3794}, "1988": {"dem": 890167, "gop": 1237258, "oth": 5682}, "1992": {"dem": 1114042, "gop": 1134661, "oth": 357864}, "1996": {"dem": 1107849, "gop": 1225938, "oth": 168059}, "2000": {"dem": 1257692, "gop": 1631163, "oth": 13891}, "2004": {"dem": 1525849, "gop": 1961166, "oth": 11731}, "2008": {"dem": 2142651, "gop": 2128474, "oth": 25722}, "2012": {"dem": 2178391, "gop": 2270395, "oth": 44515}, "2016": {"dem": 2189316, "gop": 2362631, "oth": 130126}}, "38": {"abbrev": "ND", "name": "North Dakota", "pop": 675905, "reps": 1, "ev": 3, "1976": {"dem": 136078, "gop": 153684, "oth": 3698}, "1980": {"dem": 79189, "gop": 193695, "oth": 23640}, "1984": {"dem": 104429, "gop": 200336, "oth": 1278}, "1988": {"dem": 127739, "gop": 166559, "oth": 1315}, "1992": {"dem": 99168, "gop": 136244, "oth": 71084}, "1996": {"dem": 106905, "gop": 125050, "oth": 32515}, "2000": {"dem": 95284, "gop": 174852, "oth": 10459}, "2004": {"dem": 111052, "gop": 196651, "oth": 3756}, "2008": {"dem": 141278, "gop": 168601, "oth": 4189}, "2012": {"dem": 124966, "gop": 188320, "oth": 5238}, "2016": {"dem": 93758, "gop": 216794, "oth": 21434}}, "31": {"abbrev": "NE", "name": "Nebraska", "pop": 1831825, "reps": 3, "ev": 5, "1976": {"dem": 233293, "gop": 359219, "oth": 9383}, "1980": {"dem": 166424, "gop": 419214, "oth": 44854}, "1984": {"dem": 187866, "gop": 460054, "oth": 2079}, "1988": {"dem": 259235, "gop": 397956, "oth": 2534}, "1992": {"dem": 216864, "gop": 343678, "oth": 174104}, "1996": {"dem": 236761, "gop": 363467, "oth": 71278}, "2000": {"dem": 231780, "gop": 433862, "oth": 24540}, "2004": {"dem": 254328, "gop": 512814, "oth": 5780}, "2008": {"dem": 333319, "gop": 452979, "oth": 5406}, "2012": {"dem": 302081, "gop": 475064, "oth": 11109}, "2016": {"dem": 284494, "gop": 495961, "oth": 38946}}, "33": {"abbrev": "NH", "name": "New Hampshire", "pop": 1321445, "reps": 2, "ev": 4, "1976": {"dem": 147645, "gop": 185935, "oth": 4095}, "1980": {"dem": 108864, "gop": 221705, "oth": 49693}, "1984": {"dem": 120347, "gop": 267050, "oth": 735}, "1988": {"dem": 163696, "gop": 281537, "oth": 4502}, "1992": {"dem": 209040, "gop": 202484, "oth": 121337}, "1996": {"dem": 246166, "gop": 196486, "oth": 48387}, "2000": {"dem": 266348, "gop": 273559, "oth": 22198}, "2004": {"dem": 340511, "gop": 331237, "oth": 4479}, "2008": {"dem": 384826, "gop": 316534, "oth": 3503}, "2012": {"dem": 369561, "gop": 329918, "oth": 8212}, "2016": {"dem": 348526, "gop": 345790, "oth": 30777}}, "34": {"abbrev": "NJ", "name": "New Jersey", "pop": 8807501, "reps": 12, "ev": 14, "1976": {"dem": 1444653, "gop": 1509688, "oth": 32717}, "1980": {"dem": 1147364, "gop": 1546557, "oth": 234632}, "1984": {"dem": 1261323, "gop": 1933630, "oth": 8404}, "1988": {"dem": 1320352, "gop": 1743192, "oth": 9953}, "1992": {"dem": 1436206, "gop": 1356865, "oth": 521829}, "1996": {"dem": 1652361, "gop": 1103099, "oth": 320400}, "2000": {"dem": 1788850, "gop": 1284173, "oth": 114203}, "2004": {"dem": 1911430, "gop": 1670003, "oth": 30258}, "2008": {"dem": 2215422, "gop": 1613207, "oth": 21298}, "2012": {"dem": 2122786, "gop": 1478088, "oth": 21035}, "2016": {"dem": 2148278, "gop": 1601933, "oth": 72477}}, "35": {"abbrev": "NM", "name": "New Mexico", "pop": 2067273, "reps": 3, "ev": 5, "1976": {"dem": 201148, "gop": 211419, "oth": 2462}, "1980": {"dem": 167826, "gop": 250779, "oth": 29459}, "1984": {"dem": 201769, "gop": 307101, "oth": 4459}, "1988": {"dem": 244497, "gop": 270341, "oth": 3368}, "1992": {"dem": 261617, "gop": 212824, "oth": 91895}, "1996": {"dem": 273495, "gop": 232751, "oth": 32257}, "2000": {"dem": 286783, "gop": 286417, "oth": 21251}, "2004": {"dem": 370942, "gop": 376930, "oth": 4053}, "2008": {"dem": 472422, "gop": 346832, "oth": 5327}, "2012": {"dem": 415335, "gop": 335788, "oth": 27788}, "2016": {"dem": 385234, "gop": 319667, "oth": 74541}}, "32": {"abbrev": "NV", "name": "Nevada", "pop": 2709432, "reps": 4, "ev": 6, "1976": {"dem": 92479, "gop": 101273, "oth": 5108}, "1980": {"dem": 66666, "gop": 155017, "oth": 17651}, "1984": {"dem": 91655, "gop": 188770, "oth": 2292}, "1988": {"dem": 132738, "gop": 206040, "oth": 3520}, "1992": {"dem": 189148, "gop": 175828, "oth": 132580}, "1996": {"dem": 203974, "gop": 199244, "oth": 43986}, "2000": {"dem": 279978, "gop": 301575, "oth": 15008}, "2004": {"dem": 397190, "gop": 418690, "oth": 4838}, "2008": {"dem": 533736, "gop": 412827, "oth": 6267}, "2012": {"dem": 531373, "gop": 463567, "oth": 10968}, "2016": {"dem": 539260, "gop": 512058, "oth": 37384}}, "36": {"abbrev": "NY", "name": "New York", "pop": 19421055, "reps": 27, "ev": 29, "1976": {"dem": 3244165, "gop": 2825913, "oth": 274878}, "1980": {"dem": 2728372, "gop": 2637700, "oth": 467801}, "1984": {"dem": 3001285, "gop": 3376519, "oth": 288244}, "1988": {"dem": 3255487, "gop": 2838414, "oth": 243457}, "1992": {"dem": 3346894, "gop": 2041690, "oth": 1090721}, "1996": {"dem": 3649630, "gop": 1738707, "oth": 503458}, "2000": {"dem": 3942215, "gop": 2258577, "oth": 244030}, "2004": {"dem": 4180755, "gop": 2806993, "oth": 155574}, "2008": {"dem": 4645332, "gop": 2418323, "oth": 170475}, "2012": {"dem": 4324228, "gop": 2223397, "oth": 262035}, "2016": {"dem": 4379789, "gop": 2527142, "oth": 292392}}, "39": {"abbrev": "OH", "name": "Ohio", "pop": 11568495, "reps": 16, "ev": 18, "1976": {"dem": 2009959, "gop": 2000626, "oth": 58267}, "1980": {"dem": 1752414, "gop": 2206545, "oth": 254472}, "1984": {"dem": 1825440, "gop": 2678559, "oth": 24180}, "1988": {"dem": 1939629, "gop": 2416549, "oth": 12017}, "1992": {"dem": 1984942, "gop": 1894310, "oth": 1036426}, "1996": {"dem": 2148222, "gop": 1859883, "oth": 483207}, "2000": {"dem": 2183628, "gop": 2350363, "oth": 148353}, "2004": {"dem": 2741165, "gop": 2859764, "oth": 26616}, "2008": {"dem": 2940044, "gop": 2677820, "oth": 46242}, "2012": {"dem": 2827621, "gop": 2661407, "oth": 49493}, "2016": {"dem": 2394164, "gop": 2841005, "oth": 198733}}, "40": {"abbrev": "OK", "name": "Oklahoma", "pop": 3764882, "reps": 5, "ev": 7, "1976": {"dem": 532442, "gop": 545708, "oth": 14101}, "1980": {"dem": 402026, "gop": 695570, "oth": 38284}, "1984": {"dem": 385080, "gop": 861530, "oth": 9066}, "1988": {"dem": 483423, "gop": 678367, "oth": 6261}, "1992": {"dem": 473066, "gop": 592929, "oth": 319878}, "1996": {"dem": 488105, "gop": 582315, "oth": 130788}, "2000": {"dem": 474276, "gop": 744337, "oth": 9014}, "2004": {"dem": 503966, "gop": 959792, "oth": 0}, "2008": {"dem": 502496, "gop": 960165, "oth": 0}, "2012": {"dem": 443547, "gop": 891325, "oth": 0}, "2016": {"dem": 420375, "gop": 949136, "oth": 83481}}, "41": {"abbrev": "OR", "name": "Oregon", "pop": 3848606, "reps": 5, "ev": 7, "1976": {"dem": 490407, "gop": 492120, "oth": 40207}, "1980": {"dem": 456890, "gop": 571044, "oth": 112389}, "1984": {"dem": 536479, "gop": 685700, "oth": 4348}, "1988": {"dem": 616206, "gop": 560126, "oth": 14811}, "1992": {"dem": 621314, "gop": 475757, "oth": 354091}, "1996": {"dem": 649641, "gop": 538152, "oth": 121221}, "2000": {"dem": 720342, "gop": 713577, "oth": 77357}, "2004": {"dem": 943163, "gop": 866831, "oth": 8956}, "2008": {"dem": 1037291, "gop": 738475, "oth": 18614}, "2012": {"dem": 970488, "gop": 754175, "oth": 24089}, "2016": {"dem": 1002106, "gop": 782403, "oth": 94231}}, "42": {"abbrev": "PA", "name": "Pennsylvania", "pop": 12734905, "reps": 18, "ev": 20, "1976": {"dem": 2328677, "gop": 2205604, "oth": 50584}, "1980": {"dem": 1937540, "gop": 2261872, "oth": 292921}, "1984": {"dem": 2228131, "gop": 2584323, "oth": 21628}, "1988": {"dem": 2194944, "gop": 2300087, "oth": 19158}, "1992": {"dem": 2239164, "gop": 1791841, "oth": 902667}, "1996": {"dem": 2215819, "gop": 1801169, "oth": 430984}, "2000": {"dem": 2485967, "gop": 2281127, "oth": 103392}, "2004": {"dem": 2938095, "gop": 2793847, "oth": 21185}, "2008": {"dem": 3276363, "gop": 2655885, "oth": 42977}, "2012": {"dem": 2990274, "gop": 2680434, "oth": 49991}, "2016": {"dem": 2926441, "gop": 2970733, "oth": 146715}}, "44": {"abbrev": "RI", "name": "Rhode Island", "pop": 1055247, "reps": 2, "ev": 4, "1976": {"dem": 227636, "gop": 181249, "oth": 715}, "1980": {"dem": 198342, "gop": 154793, "oth": 59819}, "1984": {"dem": 197106, "gop": 212080, "oth": 510}, "1988": {"dem": 225123, "gop": 177761, "oth": 825}, "1992": {"dem": 213299, "gop": 131601, "oth": 105045}, "1996": {"dem": 233050, "gop": 104683, "oth": 43723}, "2000": {"dem": 249508, "gop": 130555, "oth": 25052}, "2004": {"dem": 259760, "gop": 169046, "oth": 4651}, "2008": {"dem": 296571, "gop": 165391, "oth": 4829}, "2012": {"dem": 279677, "gop": 157204, "oth": 4388}, "2016": {"dem": 252525, "gop": 180543, "oth": 14746}}, "45": {"abbrev": "SC", "name": "South Carolina", "pop": 4645975, "reps": 7, "ev": 9, "1976": {"dem": 450807, "gop": 346149, "oth": 2996}, "1980": {"dem": 428220, "gop": 439277, "oth": 13868}, "1984": {"dem": 344459, "gop": 615539, "oth": 4359}, "1988": {"dem": 370554, "gop": 606443, "oth": 4935}, "1992": {"dem": 525514, "gop": 577507, "oth": 119257}, "1996": {"dem": 506152, "gop": 573339, "oth": 36913}, "2000": {"dem": 566037, "gop": 786892, "oth": 20279}, "2004": {"dem": 661669, "gop": 937974, "oth": 5520}, "2008": {"dem": 862449, "gop": 1034896, "oth": 7283}, "2012": {"dem": 865941, "gop": 1071645, "oth": 16321}, "2016": {"dem": 855373, "gop": 1155389, "oth": 49204}}, "46": {"abbrev": "SD", "name": "South Dakota", "pop": 819761, "reps": 1, "ev": 3, "1976": {"dem": 147068, "gop": 151505, "oth": 1619}, "1980": {"dem": 103855, "gop": 198343, "oth": 21431}, "1984": {"dem": 116113, "gop": 200267, "oth": 1150}, "1988": {"dem": 145560, "gop": 165415, "oth": 2016}, "1992": {"dem": 124888, "gop": 136718, "oth": 73295}, "1996": {"dem": 139333, "gop": 150543, "oth": 32478}, "2000": {"dem": 118804, "gop": 190700, "oth": 3322}, "2004": {"dem": 149244, "gop": 232584, "oth": 4320}, "2008": {"dem": 170924, "gop": 203054, "oth": 4267}, "2012": {"dem": 145039, "gop": 210610, "oth": 5795}, "2016": {"dem": 117458, "gop": 227721, "oth": 20850}}, "47": {"abbrev": "TN", "name": "Tennessee", "pop": 6375431, "reps": 9, "ev": 11, "1976": {"dem": 825879, "gop": 633969, "oth": 5769}, "1980": {"dem": 783051, "gop": 787761, "oth": 35991}, "1984": {"dem": 711714, "gop": 990212, "oth": 3072}, "1988": {"dem": 679794, "gop": 947233, "oth": 8938}, "1992": {"dem": 933521, "gop": 841300, "oth": 199968}, "1996": {"dem": 909146, "gop": 863530, "oth": 121239}, "2000": {"dem": 981720, "gop": 1061949, "oth": 32084}, "2004": {"dem": 1036477, "gop": 1384375, "oth": 16428}, "2008": {"dem": 1087437, "gop": 1479178, "oth": 33134}, "2012": {"dem": 960709, "gop": 1462330, "oth": 23001}, "2016": {"dem": 870695, "gop": 1522925, "oth": 100618}}, "48": {"abbrev": "TX", "name": "Texas", "pop": 25268418, "reps": 36, "ev": 38, "1976": {"dem": 2082319, "gop": 1953300, "oth": 20118}, "1980": {"dem": 1881147, "gop": 2510705, "oth": 111613}, "1984": {"dem": 1949276, "gop": 3433428, "oth": 14613}, "1988": {"dem": 2352748, "gop": 3036829, "oth": 30355}, "1992": {"dem": 2281815, "gop": 2496071, "oth": 1354781}, "1996": {"dem": 2459683, "gop": 2736167, "oth": 378537}, "2000": {"dem": 2433746, "gop": 3799639, "oth": 137994}, "2004": {"dem": 2832704, "gop": 4526917, "oth": 38787}, "2008": {"dem": 3528633, "gop": 4479328, "oth": 56116}, "2012": {"dem": 3308124, "gop": 4569843, "oth": 88580}, "2016": {"dem": 3877868, "gop": 4685047, "oth": 283492}}, "49": {"abbrev": "UT", "name": "Utah", "pop": 2770765, "reps": 4, "ev": 6, "1976": {"dem": 182110, "gop": 337908, "oth": 13304}, "1980": {"dem": 124266, "gop": 439687, "oth": 30284}, "1984": {"dem": 155369, "gop": 469105, "oth": 2447}, "1988": {"dem": 207343, "gop": 428442, "oth": 7473}, "1992": {"dem": 183429, "gop": 322632, "oth": 203400}, "1996": {"dem": 221633, "gop": 361911, "oth": 66461}, "2000": {"dem": 203053, "gop": 515096, "oth": 35850}, "2004": {"dem": 241199, "gop": 663742, "oth": 11305}, "2008": {"dem": 327670, "gop": 596030, "oth": 12012}, "2012": {"dem": 251813, "gop": 740600, "oth": 12572}, "2016": {"dem": 310674, "gop": 515211, "oth": 255060}}, "51": {"abbrev": "VA", "name": "Virginia", "pop": 8037736, "reps": 11, "ev": 13, "1976": {"dem": 813896, "gop": 836554, "oth": 17802}, "1980": {"dem": 752174, "gop": 989609, "oth": 95418}, "1984": {"dem": 796250, "gop": 1337078, "oth": 13307}, "1988": {"dem": 859799, "gop": 1309162, "oth": 14312}, "1992": {"dem": 1038650, "gop": 1150517, "oth": 348639}, "1996": {"dem": 1091060, "gop": 1138350, "oth": 159861}, "2000": {"dem": 1217290, "gop": 1437490, "oth": 59398}, "2004": {"dem": 1454742, "gop": 1716959, "oth": 11032}, "2008": {"dem": 1959532, "gop": 1725005, "oth": 11483}, "2012": {"dem": 1971820, "gop": 1822522, "oth": 31216}, "2016": {"dem": 1981473, "gop": 1769443, "oth": 118274}}, "50": {"abbrev": "VT", "name": "Vermont", "pop": 630337, "reps": 1, "ev": 3, "1976": {"dem": 77798, "gop": 100387, "oth": 4001}, "1980": {"dem": 81952, "gop": 94628, "oth": 31761}, "1984": {"dem": 95730, "gop": 135865, "oth": 1002}, "1988": {"dem": 115775, "gop": 124331, "oth": 1134}, "1992": {"dem": 133592, "gop": 88122, "oth": 65991}, "1996": {"dem": 137894, "gop": 80352, "oth": 31024}, "2000": {"dem": 149022, "gop": 119775, "oth": 20374}, "2004": {"dem": 184067, "gop": 121180, "oth": 4494}, "2008": {"dem": 219262, "gop": 98974, "oth": 3339}, "2012": {"dem": 199239, "gop": 92698, "oth": 3487}, "2016": {"dem": 178573, "gop": 95369, "oth": 22899}}, "53": {"abbrev": "WA", "name": "Washington", "pop": 6753369, "reps": 10, "ev": 12, "1976": {"dem": 717323, "gop": 777732, "oth": 36986}, "1980": {"dem": 650193, "gop": 865244, "oth": 185073}, "1984": {"dem": 798352, "gop": 1051670, "oth": 8844}, "1988": {"dem": 933516, "gop": 903835, "oth": 17240}, "1992": {"dem": 993037, "gop": 731234, "oth": 541780}, "1996": {"dem": 1123323, "gop": 840712, "oth": 201003}, "2000": {"dem": 1247652, "gop": 1108864, "oth": 103002}, "2004": {"dem": 1510201, "gop": 1304894, "oth": 23283}, "2008": {"dem": 1750848, "gop": 1229216, "oth": 29489}, "2012": {"dem": 1755396, "gop": 1290670, "oth": 42202}, "2016": {"dem": 1742718, "gop": 1221747, "oth": 160879}}, "55": {"abbrev": "WI", "name": "Wisconsin", "pop": 5698230, "reps": 8, "ev": 10, "1976": {"dem": 1040232, "gop": 1004987, "oth": 34943}, "1980": {"dem": 981584, "gop": 1088845, "oth": 160657}, "1984": {"dem": 995740, "gop": 1198584, "oth": 4883}, "1988": {"dem": 1126794, "gop": 1047499, "oth": 15042}, "1992": {"dem": 1041066, "gop": 930855, "oth": 544479}, "1996": {"dem": 1071971, "gop": 845029, "oth": 227339}, "2000": {"dem": 1242987, "gop": 1237279, "oth": 94070}, "2004": {"dem": 1489504, "gop": 1478120, "oth": 17272}, "2008": {"dem": 1677211, "gop": 1262393, "oth": 17605}, "2012": {"dem": 1620985, "gop": 1410966, "oth": 29383}, "2016": {"dem": 1382536, "gop": 1405284, "oth": 106674}}, "54": {"abbrev": "WV", "name": "West Virginia", "pop": 1859815, "reps": 3, "ev": 5, "1976": {"dem": 435864, "gop": 314726, "oth": 0}, "1980": {"dem": 367462, "gop": 334206, "oth": 31691}, "1984": {"dem": 328125, "gop": 405483, "oth": 996}, "1988": {"dem": 341016, "gop": 310065, "oth": 2230}, "1992": {"dem": 331001, "gop": 241974, "oth": 108829}, "1996": {"dem": 327812, "gop": 233946, "oth": 71639}, "2000": {"dem": 295497, "gop": 336475, "oth": 10680}, "2004": {"dem": 326541, "gop": 423778, "oth": 4063}, "2008": {"dem": 303857, "gop": 397466, "oth": 7219}, "2012": {"dem": 238269, "gop": 417655, "oth": 6302}, "2016": {"dem": 188794, "gop": 489371, "oth": 23004}}, "56": {"abbrev": "WY", "name": "Wyoming", "pop": 568300, "reps": 1, "ev": 3, "1976": {"dem": 62239, "gop": 92717, "oth": 1387}, "1980": {"dem": 49427, "gop": 110700, "oth": 12072}, "1984": {"dem": 53370, "gop": 133241, "oth": 2357}, "1988": {"dem": 67113, "gop": 106867, "oth": 2026}, "1992": {"dem": 68160, "gop": 79347, "oth": 51263}, "1996": {"dem": 77934, "gop": 105388, "oth": 25928}, "2000": {"dem": 60481, "gop": 147947, "oth": 2724}, "2004": {"dem": 70776, "gop": 167629, "oth": 3372}, "2008": {"dem": 82868, "gop": 164958, "oth": 3717}, "2012": {"dem": 69286, "gop": 170962, "oth": 5326}, "2016": {"dem": 55973, "gop": 174419, "oth": 13287}}};

var STATE_FIPS = Object.keys(stateData);

var stateToNumber = {};
for (var i=0; i<STATE_FIPS.length; ++i) {
  stateToNumber[STATE_FIPS[i]] = i;
}

var tableHeaders = ['population', 'electors', 'dem', 'gop', 'lib', 'grn', 'una', 'oth'];


/* Global state variables */
var currentMode = 'pickup';
var currentStateMode = 'pickup';
var stateTotals = {}

/* Data: Read once and store */
var us = null;


var switchModeButton = d3.select('#switchModeButton').html('<u>M</u>ove');
var switchModeFunction = function() {
  if (currentMode === 'pickup') {
    switchModeButton.html('Cancel <u>m</u>ove').classed('btn-danger', false).classed('btn-warning', true);
    currentMode = 'dropoff';
  } else {
    switchModeButton.html('<u>M</u>ove').classed('btn-danger', true).classed('btn-warning', false);
    currentMode = 'pickup';
  }
}
switchModeButton.on('click', switchModeFunction);
// keyboard shortcut to activate moving counties
d3.select("body").on("keydown", function(ev) {
  if (d3.event.keyCode==77) {
    switchModeFunction()
  };
});

function switchBorder() {
	currentStateMode = 'border';
}
function switchInvasion() {
	currentStateMode = 'invasion';
}


var width = parseInt('593'),
    mapRatio = 0.63,
    height = width * mapRatio;

var projection = d3.geo.albersUsa().scale(width).translate([width / 2, height / 2]);
var path = d3.geo.path().projection(projection);
var allExists = false;
var smallScale = true;

/* County detail tooltip */
var tooltip = d3.select('body').append('div')
            .attr('class', 'hidden tooltip');

var tooltipInner = tooltip.append('div').attr('class', 'tooltip-inner');
var tooltipTitle = tooltipInner.append('div').attr('class', 'tooltip-title');
var tooltipTable = tooltipInner.append('div').attr('class', 'tooltip-content').append('table').attr('class', 'table county-results');
var tooltipTr = tooltipTable.append('thead').append('tr')
tooltipTr.append('th').html('Candidate');
tooltipTr.append('th').html('Votes');
tooltipTr.append('th').html('Pct.');
var tooltipTbody = tooltipTable.append('tbody');



var svgStates = d3.select("#states-main-svg")
				.attr('width', width)
				.attr('height', height)
	            .attr('viewBox', '20 20 ' + width + ' ' + height)
	  .append("g")
		.attr("transform", "translate(" + -80 + "," + -25 + ")scale(1.25)")




var rectStates = svgStates.append("rect")
		.attr("width", width)
		.attr("height", height)
		.style("fill", "none")
		.style("pointer-events", "all");


var gStates = svgStates.append('g');

		
var widthSmall = parseInt(375),
    mapRatio = 0.63,
    heightSmall = widthSmall * mapRatio;
    
var svgSmall = d3.select("#states-small-svg")
				.attr('width', widthSmall)
				.attr('height', heightSmall)
	            .attr('viewBox', '20 20 ' + widthSmall + ' ' + heightSmall)
	  .append("g")
		.attr("transform", "translate(" + -40 + "," + -10 + ")scale(.8)")


var rectSmall = svgSmall.append("rect")
		.attr("width", widthSmall)
		.attr("height", heightSmall)
		.style("fill", "none")
		.style("pointer-events", "all");


	
var gSmall = svgSmall.append('g');

/* On update, compute the number of electors a state would get.
 * Uses 2010 Census data and the algorithm described here:
 * https://en.wikipedia.org/wiki/United_States_congressional_apportionment#The_method_of_equal_proportions
 *
 * @updates stateTotals
 */


/* Utilities */

/* If obj has prop as a property, return the value. Else return 0. */
var hasOrZero = function(obj, prop) {
  if (obj.hasOwnProperty(prop)) {
    return obj[prop];
  } else {
    return 0;
  }
}

/* Return the integer d with commas at thousands places */
var intWithCommas = function(d) {
  return d.toString().replace(/\B(?=(\d{3})+(?!\d))/g, ",");
}

var updateTotals = function() {
	// Recompute the total number of electoral votes
  var demTotal = 0;
  var leandemTotal = [0,0,0,0,0,0,0,0,0];
  var leangopTotal = [0,0,0,0,0,0,0,0,0];
  var gopTotal = 0;
  var totalElectors = 0;
  for (var i=0; i<STATE_FIPS.length; ++i) {
    var state = STATE_FIPS[i];
    var s = stateTotals[state];
    totalElectors += s.electors;
    var setTotal = true;
    while (setTotal){
		if (s.dem / (s.dem+ s.gop)>.59) {
		  demTotal += s.electors;
		  break;
		}
		else if (s.dem / (s.dem+ s.gop)<.41){
		  gopTotal += s.electors;
		  break;
		}
		for (var ii=0;ii<9;ii++){
			if (s.dem / (s.dem+ s.gop)>.58-ii*.01) {
				leandemTotal[ii] += s.electors;
				break;
			}
			if (s.dem / (s.dem+ s.gop)<.42+ii*.01) {
				leangopTotal[ii] += s.electors;
				break;
			}
		}
		setTotal = false;
    }
  }

  // Color and fill in EV bar
  var colorList = ['rgb(42,161,236)','rgb(79,169,238)','rgb(105,178,240)','rgb(125,185,242)','rgb(144,194,243)','rgb(162,203,245)','rgb(178,211,247)','rgb(194,220,249)','rgb(210,228,250)','rgb(226,237,252)','rgb(255,231,225)','rgb(255,219,210)','rgb(255,206,196)','rgb(255,194,181)','rgb(255,180,166)','rgb(255,167,150)','rgb(255,153,135)','rgb(255,139,120)','rgb(255,122,104)','rgb(254,106,89)'];
  var lGradient = 'background: linear-gradient(to right, '+colorList[0]+' 0%,';
  
  lGradient += colorList[0]+' ';
  var totP = 0;
  var totD = 0;
  var totR = 0;
  totP += demTotal;
  lGradient += (totP / totalElectors * 100)+'%, ';
  
  for (var i=1;i<10;i++){
	  lGradient += colorList[i]+' ';
	  lGradient += (totP / totalElectors * 100)+'%, ';
	  lGradient += colorList[i]+' ';
	  totP += leandemTotal[i-1];
	  lGradient += (totP / totalElectors * 100)+'%, ';
  }
  totD = totP;
  for (var i=10;i<19;i++){
	  lGradient += colorList[i]+' ';
	  lGradient += (totP / totalElectors * 100)+'%, ';
	  lGradient += colorList[i]+' ';
	  totP += leangopTotal[18-i];
	  lGradient += (totP / totalElectors * 100)+'%, ';
  }
  totR = totP+gopTotal-totD;
  
  d3.select('.ev-bar').attr('style',   lGradient + ' rgb(254,106,89) ' + (totP / totalElectors * 100)+ '%, rgb(254,106,89) 100%)');
  $(".ev-bar-dem-total").text(totD);
  $(".ev-bar-gop-total").text(totR);
  if (totD>totalElectors/2+.25){
  	d3.select('#ev-bar-panel').attr("class", "panel panel-primary");
  	d3.select('#ev-bar-text').text('D is winning by ' + (totD-totR) + ' e votes.');
  }
  else if (totR>totalElectors/2+.25){
  	d3.select('#ev-bar-panel').attr("class", "panel panel-red");
  	d3.select('#ev-bar-text').text('R is winning by ' + (totR-totD) + ' e votes.');
  }
  else {
  	d3.select('#ev-bar-panel').attr("class", "panel panel-yellow");
  	d3.select('#ev-bar-text').text('Up for grabs.');
  }
}

/**** D3 ****/

/* The main D3 update loop */
var update = function(resizeUpdate) {
	


  /* Details table rendering */
  var tr = d3.select('#states')
    .selectAll("tr")
      .data(STATE_FIPS);

  tr.enter().append("tr");
  var td = tr.selectAll("td")
    .data(function (d, i) {
      var state = stateTotals[STATE_FIPS[i]];
      return [state.name, state.population, state.electors,
              state.dem, state.gop, state.oth];
    });

  td.enter()
    .append("td");

  td.text(function (d, i) { return intWithCommas(d); })
    .attr("class", function(d, i) {
      if (i === 0) {
      	for (var i=0; i<STATE_FIPS.length; ++i) {
		  if (stateTotals[STATE_FIPS[i]].name === d) {
		  	return stateTotals[STATE_FIPS[i]].dem > stateTotals[STATE_FIPS[i]].gop ? "blue-state" : "red-state";
		  }
		}
        return null;
      } else {
        return null;
      }
    });
  td.exit().remove();
  tr.exit().remove();

  /* Draw United States with colors! */
  var mapPath;

	
  mapPath = gStates.selectAll("path.state-boundary")
    .data(d3.nest()
            .key(function(d) { return d.hasOwnProperty('properties') ? (d.properties.STATE || 'other') : 'other'; })
            .entries(us.objects.state_20m.geometries));

  mapPath.enter().append("path")
    .attr("class", "state-boundary state-boundary-filled");

  mapPath.attr("d", function(d) { return path(topojson.merge(us, d.values)); });
  


	mapPath.attr('class', function (d) {
	  if (stateTotals.hasOwnProperty(d.key)) {
		var s = stateTotals[d.key];
		var dem = hasOrZero(s, 'dem');
		var gop = hasOrZero(s, 'gop');
		var demPercent = Math.floor(dem / (dem + gop) * 20) * 5;
		
		demPercent = Math.floor(dem / (dem + gop) * 100) * 5 - 200;
		if (demPercent < 0){
			return "state-boundary dem-0-state state"+d.key;
		}
		else if (demPercent > 95) {
			return "state-boundary dem-95-state state"+d.key;
		}
		else {
			return "state-boundary dem-" + demPercent + '-state state'+d.key;
		}
		
		return "state-boundary dem-" + demPercent + '-state state'+d.key;
	
	  } else {
		return 'state-boundary';
	  }
  
	});
	
	
	mapPath.each( function(d, i){
		gStates.append('path').attr('d',d3.select(this).attr('d')).attr('class',d3.select(this).attr('class'))
		.on("mousedown", function() {
			
		  drawChart(d.key);
		  var div = d3.select(this)
			  .classed("active", true);
		  var startCoords = d3.mouse(div.node());
		  var s = stateTotals[d.key];
		  var startDemVotes = s.dem+0;
		  var startGopVotes = s.gop+0;
		  var w = d3.select(window)
			  .on("mousemove", mousemove)
			  .on("mouseup", mouseup);

		  d3.event.preventDefault(); // disable text dragging

		  function mousemove() {
		  	var currentCoords = d3.mouse(div.node())
			
			if (currentCoords[0]>startCoords[0]) {
				s.gop= Math.round((100+Math.pow(currentCoords[0]-startCoords[0],1.1))*startGopVotes/100);
			}
			else {
				s.dem= Math.round((100-currentCoords[0]+startCoords[0])*startDemVotes/100);
			}
			
			var demPercent = Math.floor(s.dem / (s.dem + s.gop) * 20) * 5;
			demPercent = Math.floor(s.dem / (s.dem + s.gop) * 100) * 5 - 200;
			if (demPercent < 0){
				demPercent = 0;
			}
			else if (demPercent > 95) {
				demPercent = 95;
			}
			div.attr('class',"state-boundary dem-" + demPercent + '-state state'+d.key);
			d3.selectAll(".state"+d.key).attr('class',"state-boundary dem-" + demPercent + '-state state'+d.key);
			updateTotals();
			
		  }

		  function mouseup() {
			div.classed("active", false);
			w.on("mousemove", null).on("mouseup", null);
		  }
		});
	});
	mapPath.attr("class", "state-boundary state-boundary-filled");
    
    var mapPathSmall;

	
  mapPathSmall = gSmall.selectAll("path.state-boundary")
    .data(d3.nest()
            .key(function(d) { return d.hasOwnProperty('properties') ? (d.properties.STATE || 'other') : 'other'; })
            .entries(us.objects.state_20m.geometries));

  mapPathSmall.enter().append("path")
    .attr("class", "state-boundary state-boundary-filled");

  mapPathSmall.attr("d", function(d) { return path(topojson.merge(us, d.values)); });
  


	mapPathSmall.attr('class', function (d) {
	  if (stateTotals.hasOwnProperty(d.key)) {
		var s = stateTotals[d.key];
		var demYear = s.demOld[otherMap];
		var gopYear = s.gopOld[otherMap];
		var demPercent = Math.floor(demYear / (demYear + gopYear) * 20) * 5;
		
		demPercent = Math.floor(demYear / (demYear + gopYear) * 100) * 5 - 200;
		if (demPercent < 0){
			return "state-boundary dem-0-state";
		}
		else if (demPercent > 95) {
			return "state-boundary dem-95-state";
		}
		else {
			return "state-boundary dem-" + demPercent + '-state';
		}
	
	  } else {
		return 'state-boundary';
	  }
  
	});
	mapPathSmall.each( function(d, i){
		gSmall.append('path').attr('d',d3.select(this).attr('d')).attr('class',d3.select(this).attr('class'))
		
	});
	mapPathSmall.attr("class", "state-boundary state-boundary-filled");

  

  updateTotals();
}


/* Read data once! */
var reset = function(dataFile, useUrl) {
	
  if (dataFile in data) {
    execReset(data[dataFile], useUrl);
  } else {
    d3.json(dataFile, function(error, usData) {
      if (error) throw error;
      data[dataFile] = usData;
      execReset(usData, useUrl);
      allExists = true;
    });
  }
}
reset(dataFile, false);

var execReset = function(usData, useUrl) {
	
  us = usData;
  //stateCenters = {"Arizona":[168.69052664095273,221.7061475213349],"Arkansas":[330.67077762734743,225.58667045603744],"California":[111.36593646774978,178.73003849789376],"Colorado":[224.9578285771164,179.56115447331615],"Connecticut":[477.40494209702985,134.35886873635292],"District of Columbia":[450.5593861944886,169.838491141267],"Georgia":[409.11307029343703,242.41345336232303],"Hawaii":[211.25298295696092,309.1803631579295],"Illinois":[354.07881251399647,170.6165060641635],"Indiana":[376.97030169096814,170.10334121285177],"Louisiana":[336.26310000256393,265.4823301936088],"Minnesota":[312.9254816541592,107.60834578261432],"Mississippi":[355.4403674134379,246.74710713741086],"Montana":[204.7104036634623,92.83834887683196],"New Mexico":[215.43568789389082,226.72143478779907],"North Dakota":[269.4356962739911,94.91099880772919],"Oklahoma":[288.32586077951527,218.79879100526375],"Pennsylvania":[440.9398276245516,150.30336219624854],"Tennessee":[380.8659994708282,212.06508139581047],"Virginia":[439.6574699175451,186.16028428629284],"Delaware":[462.73761238969746,166.25357181164418],"West Virginia":[423.12675864520673,177.15235795655957],"Wisconsin":[344.8447883205305,123.49102063650531],"Wyoming":[214.2072521170447,136.4401524333469],"Alabama":[379.8909024462365,244.3869670983596],"Alaska":[120.75861861174559,285.5888978061263],"Florida":[423.3604045790885,282.2725961994701],"Idaho":[164.57069543851952,114.24733662655507],"Kansas":[281.7420238824314,188.37257341055152],"Maryland":[452.83072013559087,167.49563673121276],"New Jersey":[466.30093390002,152.3556994815338],"North Carolina":[438.9471607776693,207.22479761973517],"South Carolina":[428.9479138505259,226.37460577162813],"Washington":[130.63036037561494,74.40716099480073],"Vermont":[471.6265821975479,109.62716078489882],"Utah":[177.25073712637658,169.9051386544022],"Iowa":[319.8912549808634,151.00033078335827],"Kentucky":[387.46307926459394,193.79862497086896],"Maine":[492.4422487054112,90.14261086953206],"Massachusetts":[482.56892385072274,126.06897210940946],"Michigan":[378.889464458131,123.63939054541612],"Missouri":[329.22411083512674,189.533007440076],"Nebraska":[271.72736424065715,156.28025545198125],"Nevada":[138.74005782712837,162.23569099484308],"New Hampshire":[480.53683320956486,111.3837434833323],"New York":[453.78213130280096,125.78223725503176],"Ohio":[403.5777139033015,162.81393775432628],"Oregon":[120.76470308244595,108.56031073034723],"Rhode Island":[485.8886038829522,131.34563848903196],"South Dakota":[269.65062530947347,125.95127907249758],"Texas":[271.63626414639884,261.29980504991823]};
  //var savedCenters = {"Arizona":[168.69052664095273,221.7061475213349],"Arkansas":[330.67077762734743,225.58667045603744],"California":[111.36593646774978,178.73003849789376],"Colorado":[224.9578285771164,179.56115447331615],"Georgia":[409.11307029343703,242.41345336232303],"Hawaii":[211.25298295696092,309.1803631579295],"Illinois":[354.07881251399647,170.6165060641635],"Indiana":[376.97030169096814,170.10334121285177],"Louisiana":[336.26310000256393,265.4823301936088],"Minnesota":[312.9254816541592,107.60834578261432],"Mississippi":[355.4403674134379,246.74710713741086],"Montana":[204.7104036634623,92.83834887683196],"New Mexico":[215.43568789389082,226.72143478779907],"North Dakota":[269.4356962739911,94.91099880772919],"Oklahoma":[288.32586077951527,218.79879100526375],"Pennsylvania":[440.9398276245516,150.30336219624854],"Tennessee":[380.8659994708282,212.06508139581047],"Virginia":[439.6574699175451,186.16028428629284],"West Virginia":[423.12675864520673,177.15235795655957],"Wisconsin":[344.8447883205305,123.49102063650531],"Wyoming":[214.2072521170447,136.4401524333469],"Alabama":[379.8909024462365,244.3869670983596],"Alaska":[120.75861861174559,285.5888978061263],"Florida":[423.3604045790885,282.2725961994701],"Idaho":[164.57069543851952,114.24733662655507],"Kansas":[281.7420238824314,188.37257341055152],"North Carolina":[438.9471607776693,207.22479761973517],"South Carolina":[428.9479138505259,226.37460577162813],"Washington":[130.63036037561494,74.40716099480073],"Vermont":[471.6265821975479,109.62716078489882],"Utah":[177.25073712637658,169.9051386544022],"Iowa":[319.8912549808634,151.00033078335827],"Kentucky":[387.46307926459394,193.79862497086896],"Maine":[492.4422487054112,90.14261086953206],"Michigan":[378.889464458131,123.63939054541612],"Missouri":[329.22411083512674,189.533007440076],"Nebraska":[271.72736424065715,156.28025545198125],"Nevada":[138.74005782712837,162.23569099484308],"New Hampshire":[480.53683320956486,111.3837434833323],"New York":[453.78213130280096,125.78223725503176],"Ohio":[403.5777139033015,162.81393775432628],"Oregon":[120.76470308244595,108.56031073034723],"South Dakota":[269.65062530947347,125.95127907249758],"Texas":[271.63626414639884,261.29980504991823]};
  var stateEVspot = {"Arizona":[168.69052664095273,221.7061475213349],"Arkansas":[330.67077762734743,225.58667045603744],"California":[112,185],"Colorado":[224.9578285771164,179.56115447331615],"Georgia":[409.11307029343703,242.41345336232303],"Hawaii":[222,312],"Illinois":[354.07881251399647,170.6165060641635],"Indiana":[376.97030169096814,170.10334121285177],"Louisiana":[332,266],"Minnesota":[312.9254816541592,107.60834578261432],"Mississippi":[355.4403674134379,246.74710713741086],"Montana":[204.7104036634623,92.83834887683196],"New Mexico":[215.43568789389082,226.72143478779907],"North Dakota":[269.4356962739911,94.91099880772919],"Oklahoma":[288,222],"Pennsylvania":[444,153],"Tennessee":[380,215],"Virginia":[444,188],"West Virginia":[423,183],"Wisconsin":[344.8447883205305,123.49102063650531],"Wyoming":[214.2072521170447,136.4401524333469],"Alabama":[379.8909024462365,244.3869670983596],"Alaska":[120.75861861174559,285.5888978061263],"Florida":[435,293],"Idaho":[165,118],"Kansas":[281.7420238824314,188.37257341055152],"North Carolina":[444,210],"South Carolina":[434,231],"Washington":[130.63036037561494,74.40716099480073],"Vermont":[475,112],"Utah":[177.25073712637658,169.9051386544022],"Iowa":[319.8912549808634,151.00033078335827],"Kentucky":[393,195],"Maine":[493,90],"Michigan":[383,137],"Missouri":[329.22411083512674,189.533007440076],"Nebraska":[271.72736424065715,156.28025545198125],"Nevada":[138.74005782712837,162.23569099484308],"New Hampshire":[484,104],"New York":[453.78213130280096,125.78223725503176],"Ohio":[403.5777139033015,162.81393775432628],"Oregon":[120.76470308244595,108.56031073034723],"South Dakota":[269.65062530947347,125.95127907249758],"Texas":[271.63626414639884,261.29980504991823]};
  var stateNAMEspot = {"Arizona":[168.69052664095273,221.7061475213349],"Arkansas":[330.67077762734743,225.58667045603744],"California":[112,185],"Colorado":[224.9578285771164,179.56115447331615],"Georgia":[409.11307029343703,242.41345336232303],"Hawaii":[222,312],"Illinois":[354.07881251399647,170.6165060641635],"Indiana":[376.97030169096814,170.10334121285177],"Louisiana":[332,266],"Minnesota":[312.9254816541592,107.60834578261432],"Mississippi":[355.4403674134379,246.74710713741086],"Montana":[204.7104036634623,92.83834887683196],"New Mexico":[215.43568789389082,226.72143478779907],"North Dakota":[269.4356962739911,94.91099880772919],"Oklahoma":[288,222],"Pennsylvania":[444,153],"Tennessee":[380,217],"Virginia":[444,188],"West Virginia":[423,183],"Wisconsin":[344.8447883205305,123.49102063650531],"Wyoming":[214.2072521170447,136.4401524333469],"Alabama":[379.8909024462365,244.3869670983596],"Alaska":[120.75861861174559,285.5888978061263],"Florida":[435,293],"Idaho":[165,118],"Kansas":[281.7420238824314,188.37257341055152],"North Carolina":[444,210],"South Carolina":[434,231],"Washington":[130.63036037561494,74.40716099480073],"Vermont":[472,112],"Utah":[177.25073712637658,169.9051386544022],"Iowa":[319.8912549808634,151.00033078335827],"Kentucky":[393,195],"Maine":[490,110],"Michigan":[383,137],"Missouri":[329.22411083512674,189.533007440076],"Nebraska":[271.72736424065715,156.28025545198125],"Nevada":[138.74005782712837,162.23569099484308],"New Hampshire":[482,123],"New York":[453.78213130280096,125.78223725503176],"Ohio":[403.5777139033015,162.81393775432628],"Oregon":[120.76470308244595,108.56031073034723],"South Dakota":[269.65062530947347,125.95127907249758],"Texas":[271.63626414639884,261.29980504991823]};
  
  //excludeStates = ["District of Columbia","Delaware","Maryland","Connecticut","Rhode Island","New Jersey","Massachusetts"];
  
  

  stateTotals = {};
  
  
  for (var i=0; i<STATE_FIPS.length; ++i) {
    stateTotals[STATE_FIPS[i]] = {population: stateData[STATE_FIPS[i]]['pop'],
                                     electors: stateData[STATE_FIPS[i]]['ev'],
                                     name: stateData[STATE_FIPS[i]]['name'],
                                     color: 1,
                                     dem: stateData[STATE_FIPS[i]][2016]['dem'],
                                     gop: stateData[STATE_FIPS[i]][2016]['gop'],
                                     oth: stateData[STATE_FIPS[i]][2016]['oth'],
                                     demOld: {1976:stateData[STATE_FIPS[i]][1976]['dem'],1980:stateData[STATE_FIPS[i]][1980]['dem'],1984:stateData[STATE_FIPS[i]][1984]['dem'],1988:stateData[STATE_FIPS[i]][1988]['dem'],1992:stateData[STATE_FIPS[i]][1992]['dem'],1996:stateData[STATE_FIPS[i]][1996]['dem'],2000:stateData[STATE_FIPS[i]][2000]['dem'],2004:stateData[STATE_FIPS[i]][2004]['dem'],2008:stateData[STATE_FIPS[i]][2008]['dem'],2012:stateData[STATE_FIPS[i]][2012]['dem'],2016:stateData[STATE_FIPS[i]][2016]['dem']},
                                     gopOld: {1976:stateData[STATE_FIPS[i]][1976]['gop'],1980:stateData[STATE_FIPS[i]][1980]['gop'],1984:stateData[STATE_FIPS[i]][1984]['gop'],1988:stateData[STATE_FIPS[i]][1988]['gop'],1992:stateData[STATE_FIPS[i]][1992]['gop'],1996:stateData[STATE_FIPS[i]][1996]['gop'],2000:stateData[STATE_FIPS[i]][2000]['gop'],2004:stateData[STATE_FIPS[i]][2004]['gop'],2008:stateData[STATE_FIPS[i]][2008]['gop'],2012:stateData[STATE_FIPS[i]][2012]['gop'],2016:stateData[STATE_FIPS[i]][2016]['gop']},
                                     othOld: {1976:stateData[STATE_FIPS[i]][1976]['oth'],1980:stateData[STATE_FIPS[i]][1980]['oth'],1984:stateData[STATE_FIPS[i]][1984]['oth'],1988:stateData[STATE_FIPS[i]][1988]['oth'],1992:stateData[STATE_FIPS[i]][1992]['oth'],1996:stateData[STATE_FIPS[i]][1996]['oth'],2000:stateData[STATE_FIPS[i]][2000]['oth'],2004:stateData[STATE_FIPS[i]][2004]['oth'],2008:stateData[STATE_FIPS[i]][2008]['oth'],2012:stateData[STATE_FIPS[i]][2012]['oth'],2016:stateData[STATE_FIPS[i]][2016]['oth']},
                                     };
  }
	
	var geojson = topojson.feature(us, us.objects.state_20m).features;
    geojson.forEach(function(d) {
		
	  if (d.properties.NAME ) {
		  var numberLoc = stateEVspot[d.properties.NAME];
		  var textLoc = stateNAMEspot[d.properties.NAME];
		  if (numberLoc && stateTotals[d.properties.STATE].electors ) {
		  var numberElectors = stateTotals[d.properties.STATE].electors;
		  var stateAbbrev = stateData[d.properties.STATE].abbrev;
	  
	  
			  svgStates.append("text")
				.attr("x", numberLoc[0]-5)
				.attr("y", numberLoc[1]+5)
				.text(numberElectors)
				.style("fill", "black")
				.style("font-size", "8")
				.style("pointer-events", "none");
			  svgStates.append("text")
				.attr("x", textLoc[0]-5)
				.attr("y", textLoc[1]-5)
				.text(stateAbbrev)
				.style("fill", "black")
				.style("font-size", "8")
				.style("pointer-events", "none");
		  }
	  }
		
	});
	
	addStateCircle("34",[500,172],"NJ","14");
	addStateCircle("11",[518,210],"DC","3");
	addStateCircle("10",[518,185],"DE","3");
	addStateCircle("24",[500,197],"MD","10");
	
	addStateCircle("09",[500,147],"CT","7");
	addStateCircle("44",[518,160],"RI","4");
	addStateCircle("25",[518,135],"MA","11");
	
	addNebraska();
	addMaine();
	
	
			
  gStates.selectAll('path').remove();
  d3.selectAll('#states>tr').remove();
  $("#lede").html("How few counties can you move to make " + loser + " win the " + year + " election?");



  update();
}

function addStateCircle(stateKey,stateL,stateA,stateE){
	var xShift = -1
	if (stateE>9){
		xShift = -4;
	}
	svgStates.append("circle")
			.attr("cx", stateL[0])
			.attr("cy", stateL[1])
			.attr("r", 10)
			.attr("class","state-boundary state-boundary-filled")
			.attr('class', function () {

				var s = stateTotals[stateKey];
				var dem = hasOrZero(s, 'dem');
				var gop = hasOrZero(s, 'gop');
				var demPercent = Math.floor(dem / (dem + gop) * 20) * 5;
		
				demPercent = Math.floor(dem / (dem + gop) * 100) * 5 - 200;
				if (demPercent < 0){
					return "state-boundary dem-0-state state"+stateKey;
				}
				else if (demPercent > 95) {
					return "state-boundary dem-95-state state"+stateKey;
				}
				else {
					return "state-boundary dem-" + demPercent + '-state state'+stateKey;
				}
		
				return "state-boundary dem-" + demPercent + '-state state'+stateKey;
	
  
			})
			.style("pointer-events", "all")
			.on("mousedown", function() {
				  
				  drawChart(stateKey);
				  var div = d3.select(this)
					  .classed("active", true);
				  var startCoords = d3.mouse(div.node());
				  var s = stateTotals[stateKey];
				  var startDemVotes = s.dem+0;
				  var startGopVotes = s.gop+0;
				  var w = d3.select(window)
					  .on("mousemove", mousemove)
					  .on("mouseup", mouseup);

				  d3.event.preventDefault(); // disable text dragging

				  function mousemove() {
					var currentCoords = d3.mouse(div.node())
			
					if (currentCoords[0]>startCoords[0]) {
						s.gop= Math.round((100+Math.pow(currentCoords[0]-startCoords[0],1.1))*startGopVotes/100);
					}
					else {
						s.dem= Math.round((100-currentCoords[0]+startCoords[0])*startDemVotes/100);
					}
			
					var demPercent = Math.floor(s.dem / (s.dem + s.gop) * 20) * 5;
					demPercent = Math.floor(s.dem / (s.dem + s.gop) * 100) * 5 - 200;
					if (demPercent < 0){
						demPercent = 0;
					}
					else if (demPercent > 95) {
						demPercent = 95;
					}
					div.attr('class',"state-boundary dem-" + demPercent + '-state state'+stateKey);
					d3.selectAll("path.state"+stateKey).attr('class',"state-boundary dem-" + demPercent + '-state state'+stateKey);
					updateTotals();
			
				  }

				  function mouseup() {
					div.classed("active", false);
					w.on("mousemove", null).on("mouseup", null);
				  }
				});
		svgStates.append("text")
			.attr("x", stateL[0]-5)
			.attr("y", stateL[1]-2)
			.text(stateA)
			.style("fill", "black")
			.style("font-size", "8")
			.style("pointer-events", "none");
		svgStates.append("text")
			.attr("x", stateL[0]+xShift)
			.attr("y", stateL[1]+6)
			.text(stateE)
			.style("fill", "black")
			.style("font-size", "8")
			.style("pointer-events", "none");
}
function addNebraska(){
	var stateKey = "31";
	svgStates.append("circle")
			.attr("cx", 288)
			.attr("cy", 155)
			.attr("r", 6)
			.attr("class","state-boundary state-boundary-filled")
			.attr('class', function () {

				var s = stateTotals[stateKey];
				var dem = hasOrZero(s, 'dem');
				var gop = hasOrZero(s, 'gop');
				var demPercent = Math.floor(dem / (dem + gop) * 20) * 5;
		
				demPercent = Math.floor(dem / (dem + gop) * 100) * 5 - 200;
				if (demPercent < 0){
					return "state-boundary dem-0-state state"+stateKey;
				}
				else if (demPercent > 95) {
					return "state-boundary dem-95-state state"+stateKey;
				}
				else {
					return "state-boundary dem-" + demPercent + '-state state'+stateKey;
				}
		
				return "state-boundary dem-" + demPercent + '-state state'+stateKey;
	
  
			})
			.style("pointer-events", "all")
			.on("mousedown", function() {
				  
				  drawChart(stateKey);
				  var div = d3.select(this)
					  .classed("active", true);
				  var startCoords = d3.mouse(div.node());
				  var s = stateTotals[stateKey];
				  var startDemVotes = s.dem+0;
				  var startGopVotes = s.gop+0;
				  var w = d3.select(window)
					  .on("mousemove", mousemove)
					  .on("mouseup", mouseup);

				  d3.event.preventDefault(); // disable text dragging

				  function mousemove() {
					var currentCoords = d3.mouse(div.node())
			
					if (currentCoords[0]>startCoords[0]) {
						s.gop= Math.round((100+Math.pow(currentCoords[0]-startCoords[0],1.1))*startGopVotes/100);
					}
					else {
						s.dem= Math.round((100-currentCoords[0]+startCoords[0])*startDemVotes/100);
					}
			
					var demPercent = Math.floor(s.dem / (s.dem + s.gop) * 20) * 5;
					demPercent = Math.floor(s.dem / (s.dem + s.gop) * 100) * 5 - 200;
					if (demPercent < 0){
						demPercent = 0;
					}
					else if (demPercent > 95) {
						demPercent = 95;
					}
					div.attr('class',"state-boundary dem-" + demPercent + '-state state'+stateKey);
					d3.selectAll("path.state"+stateKey).attr('class',"state-boundary dem-" + demPercent + '-state state'+stateKey);
					updateTotals();
			
				  }

				  function mouseup() {
					div.classed("active", false);
					w.on("mousemove", null).on("mouseup", null);
				  }
				});
	svgStates.append("circle")
			.attr("cx", 282)
			.attr("cy", 165)
			.attr("r", 6)
			.attr("class","state-boundary state-boundary-filled")
			.attr('class', function () {

				var s = stateTotals[stateKey];
				var dem = hasOrZero(s, 'dem');
				var gop = hasOrZero(s, 'gop');
				var demPercent = Math.floor(dem / (dem + gop) * 20) * 5;
		
				demPercent = Math.floor(dem / (dem + gop) * 100) * 5 - 200;
				if (demPercent < 0){
					return "state-boundary dem-0-state state"+stateKey;
				}
				else if (demPercent > 95) {
					return "state-boundary dem-95-state state"+stateKey;
				}
				else {
					return "state-boundary dem-" + demPercent + '-state state'+stateKey;
				}
		
				return "state-boundary dem-" + demPercent + '-state state'+stateKey;
	
  
			})
			.style("pointer-events", "all")
			.on("mousedown", function() {
				  
				  drawChart(stateKey);
				  var div = d3.select(this)
					  .classed("active", true);
				  var startCoords = d3.mouse(div.node());
				  var s = stateTotals[stateKey];
				  var startDemVotes = s.dem+0;
				  var startGopVotes = s.gop+0;
				  var w = d3.select(window)
					  .on("mousemove", mousemove)
					  .on("mouseup", mouseup);

				  d3.event.preventDefault(); // disable text dragging

				  function mousemove() {
					var currentCoords = d3.mouse(div.node())
			
					if (currentCoords[0]>startCoords[0]) {
						s.gop= Math.round((100+Math.pow(currentCoords[0]-startCoords[0],1.1))*startGopVotes/100);
					}
					else {
						s.dem= Math.round((100-currentCoords[0]+startCoords[0])*startDemVotes/100);
					}
			
					var demPercent = Math.floor(s.dem / (s.dem + s.gop) * 20) * 5;
					demPercent = Math.floor(s.dem / (s.dem + s.gop) * 100) * 5 - 200;
					if (demPercent < 0){
						demPercent = 0;
					}
					else if (demPercent > 95) {
						demPercent = 95;
					}
					div.attr('class',"state-boundary dem-" + demPercent + '-state state'+stateKey);
					d3.selectAll("path.state"+stateKey).attr('class',"state-boundary dem-" + demPercent + '-state state'+stateKey);
					updateTotals();
			
				  }

				  function mouseup() {
					div.classed("active", false);
					w.on("mousemove", null).on("mouseup", null);
				  }
				});
	svgStates.append("circle")
			.attr("cx", 295)
			.attr("cy", 165)
			.attr("r", 6)
			.attr("class","state-boundary state-boundary-filled")
			.attr('class', function () {

				var s = stateTotals[stateKey];
				var dem = hasOrZero(s, 'dem');
				var gop = hasOrZero(s, 'gop');
				var demPercent = Math.floor(dem / (dem + gop) * 20) * 5;
		
				demPercent = Math.floor(dem / (dem + gop) * 100) * 5 - 200;
				if (demPercent < 0){
					return "state-boundary dem-0-state state"+stateKey;
				}
				else if (demPercent > 95) {
					return "state-boundary dem-95-state state"+stateKey;
				}
				else {
					return "state-boundary dem-" + demPercent + '-state state'+stateKey;
				}
		
				return "state-boundary dem-" + demPercent + '-state state'+stateKey;
	
  
			})
			.style("pointer-events", "all")
			.on("mousedown", function() {
				  
				  drawChart(stateKey);
				  var div = d3.select(this)
					  .classed("active", true);
				  var startCoords = d3.mouse(div.node());
				  var s = stateTotals[stateKey];
				  var startDemVotes = s.dem+0;
				  var startGopVotes = s.gop+0;
				  var w = d3.select(window)
					  .on("mousemove", mousemove)
					  .on("mouseup", mouseup);

				  d3.event.preventDefault(); // disable text dragging

				  function mousemove() {
					var currentCoords = d3.mouse(div.node())
			
					if (currentCoords[0]>startCoords[0]) {
						s.gop= Math.round((100+Math.pow(currentCoords[0]-startCoords[0],1.1))*startGopVotes/100);
					}
					else {
						s.dem= Math.round((100-currentCoords[0]+startCoords[0])*startDemVotes/100);
					}
			
					var demPercent = Math.floor(s.dem / (s.dem + s.gop) * 20) * 5;
					demPercent = Math.floor(s.dem / (s.dem + s.gop) * 100) * 5 - 200;
					if (demPercent < 0){
						demPercent = 0;
					}
					else if (demPercent > 95) {
						demPercent = 95;
					}
					div.attr('class',"state-boundary dem-" + demPercent + '-state state'+stateKey);
					d3.selectAll("path.state"+stateKey).attr('class',"state-boundary dem-" + demPercent + '-state state'+stateKey);
					updateTotals();
			
				  }

				  function mouseup() {
					div.classed("active", false);
					w.on("mousemove", null).on("mouseup", null);
				  }
				});
}
function addMaine(){
	var stateKey = "23";
	svgStates.append("circle")
			.attr("cx", 500)
			.attr("cy", 91)
			.attr("r", 6)
			.attr("class","state-boundary state-boundary-filled")
			.attr('class', function () {

				var s = stateTotals[stateKey];
				var dem = hasOrZero(s, 'dem');
				var gop = hasOrZero(s, 'gop');
				var demPercent = Math.floor(dem / (dem + gop) * 20) * 5;
		
				demPercent = Math.floor(dem / (dem + gop) * 100) * 5 - 200;
				if (demPercent < 0){
					return "state-boundary dem-0-state state"+stateKey;
				}
				else if (demPercent > 95) {
					return "state-boundary dem-95-state state"+stateKey;
				}
				else {
					return "state-boundary dem-" + demPercent + '-state state'+stateKey;
				}
		
				return "state-boundary dem-" + demPercent + '-state state'+stateKey;
	
  
			})
			.style("pointer-events", "all")
			.on("mousedown", function() {
				  
				  drawChart(stateKey);
				  var div = d3.select(this)
					  .classed("active", true);
				  var startCoords = d3.mouse(div.node());
				  var s = stateTotals[stateKey];
				  var startDemVotes = s.dem+0;
				  var startGopVotes = s.gop+0;
				  var w = d3.select(window)
					  .on("mousemove", mousemove)
					  .on("mouseup", mouseup);

				  d3.event.preventDefault(); // disable text dragging

				  function mousemove() {
					var currentCoords = d3.mouse(div.node())
			
					if (currentCoords[0]>startCoords[0]) {
						s.gop= Math.round((100+Math.pow(currentCoords[0]-startCoords[0],1.1))*startGopVotes/100);
					}
					else {
						s.dem= Math.round((100-currentCoords[0]+startCoords[0])*startDemVotes/100);
					}
			
					var demPercent = Math.floor(s.dem / (s.dem + s.gop) * 20) * 5;
					demPercent = Math.floor(s.dem / (s.dem + s.gop) * 100) * 5 - 200;
					if (demPercent < 0){
						demPercent = 0;
					}
					else if (demPercent > 95) {
						demPercent = 95;
					}
					div.attr('class',"state-boundary dem-" + demPercent + '-state state'+stateKey);
					d3.selectAll("path.state"+stateKey).attr('class',"state-boundary dem-" + demPercent + '-state state'+stateKey);
					updateTotals();
			
				  }

				  function mouseup() {
					div.classed("active", false);
					w.on("mousemove", null).on("mouseup", null);
				  }
				});
	svgStates.append("circle")
			.attr("cx", 493)
			.attr("cy", 80)
			.attr("r", 6)
			.attr("class","state-boundary state-boundary-filled")
			.attr('class', function () {

				var s = stateTotals[stateKey];
				var dem = hasOrZero(s, 'dem');
				var gop = hasOrZero(s, 'gop');
				var demPercent = Math.floor(dem / (dem + gop) * 20) * 5;
		
				demPercent = Math.floor(dem / (dem + gop) * 100) * 5 - 200;
				if (demPercent < 0){
					return "state-boundary dem-0-state state"+stateKey;
				}
				else if (demPercent > 95) {
					return "state-boundary dem-95-state state"+stateKey;
				}
				else {
					return "state-boundary dem-" + demPercent + '-state state'+stateKey;
				}
		
				return "state-boundary dem-" + demPercent + '-state state'+stateKey;
	
  
			})
			.style("pointer-events", "all")
			.on("mousedown", function() {
				  
				  drawChart(stateKey);
				  var div = d3.select(this)
					  .classed("active", true);
				  var startCoords = d3.mouse(div.node());
				  var s = stateTotals[stateKey];
				  var startDemVotes = s.dem+0;
				  var startGopVotes = s.gop+0;
				  var w = d3.select(window)
					  .on("mousemove", mousemove)
					  .on("mouseup", mouseup);

				  d3.event.preventDefault(); // disable text dragging

				  function mousemove() {
					var currentCoords = d3.mouse(div.node())
			
					if (currentCoords[0]>startCoords[0]) {
						s.gop= Math.round((100+Math.pow(currentCoords[0]-startCoords[0],1.1))*startGopVotes/100);
					}
					else {
						s.dem= Math.round((100-currentCoords[0]+startCoords[0])*startDemVotes/100);
					}
			
					var demPercent = Math.floor(s.dem / (s.dem + s.gop) * 20) * 5;
					demPercent = Math.floor(s.dem / (s.dem + s.gop) * 100) * 5 - 200;
					if (demPercent < 0){
						demPercent = 0;
					}
					else if (demPercent > 95) {
						demPercent = 95;
					}
					div.attr('class',"state-boundary dem-" + demPercent + '-state state'+stateKey);
					d3.selectAll("path.state"+stateKey).attr('class',"state-boundary dem-" + demPercent + '-state state'+stateKey);
					updateTotals();
			
				  }

				  function mouseup() {
					div.classed("active", false);
					w.on("mousemove", null).on("mouseup", null);
				  }
				});
}
//setFirstSize();
//reset(dataFile, true);



/**** Sharing ****/

/* Turn map into URL */
var getShareUrl = function() {
  us.objects.state_20m.geometries.sort(function(x, y) {
    if (x.id < y.id) {
      return -1;
    } else if (x.id > y.id) {
      return 1;
    } else {
      return 0;
    }
  });
  shareUrl = [];
  for (var i=0; i<us.objects.state_20m.geometries.length; ++i) {
    var geom = us.objects.state_20m.geometries[i];
    if (geom.hasOwnProperty('properties')) {
      shareUrl.push(numberToLetter[stateToNumber[geom.properties.STATE]]);
    } else {
      shareUrl.push(numberToLetter[51]);
    }
  }
  var baseUrl = window.location.origin + window.location.pathname + '?';
  if (year !== '2016') {
    baseUrl += 'year=' + year + '&';
  }
  return baseUrl + 'share=' + shareUrl.join('');
}

/* Setup sharing URL in the share box */
var doShare = function() {
  d3.select("#clipboard-target").attr("value", getShareUrl());
}

$("#shareGroup").hide();

$("#shareButton").popover({
  container: 'body',
  content: $("#shareGroup"),
  title: "Copy URL to Share",
  html: true,
  placement: "left",
  trigger: "focus"
}).on('show.bs.popover', function() { doShare(); $("#shareGroup").show(); });

var clipboard = new Clipboard('[data-clipboard-tooltip]');
clipboard.on('success', function(e) {
  e.clearSelection();
  console.info('Action:', e.action);
  console.info('Text:', e.text);
  console.info('Trigger:', e.trigger);
});


function zoomed() {
  g.attr("transform", "translate(" + d3.event.translate + ")scale(" + d3.event.scale + ")");
  if (smallScale && (d3.event.scale > 3)) {
    smallScale = false;
    d3.selectAll('path').style('stroke-width', '0.1px');
    console.log("become large");
  } else if (!smallScale && (d3.event.scale < 3)) {
    smallScale = true;
    d3.selectAll('path').style('stroke-width', '.5px');
    console.log("Become small", d3.event.scale);
  }
  
}

function zoomState(state) {
  
  
}

function setFirstSize() {
  
  var wHeight = window.innerHeight || document.documentElement.clientHeight || document.body.clientHeight;
  width = Math.min(parseInt(document.getElementById('states-main-div').offsetWidth),wHeight*1.25);
  height = width * 0.63;
  d3.select('#states-main-div').attr('height', height + "px");
  d3.select('#states-main-div').attr('width', width + "px");
  d3.select('#states-main-svg').attr('height', height + "px");
  d3.select('#states-main-svg').attr('width', width + "px");
  
  rectStates.attr('height', height + "px");
  rectStates.attr('width', width + "px");
  svgStates.attr('height', height + "px");
  svgStates.attr('width', width + "px");
  d3.select('#states-main-div').attr('viewBox', '20 20 ' + width + ' ' + height);
  
  widthSmall = Math.min(parseInt(document.getElementById('states-small-div').offsetWidth),wHeight*1.25);
  heightSmall = widthSmall * 0.63;
  d3.select('#states-small-div').attr('height', heightSmall + "px");
  d3.select('#states-small-div').attr('width', widthSmall + "px");
  d3.select('#states-small-svg').attr('height', heightSmall + "px");
  d3.select('#states-small-svg').attr('width', widthSmall + "px");
  
  rectSmall.attr('height', heightSmall + "px");
  rectSmall.attr('width', widthSmall + "px");
  svgSmall.attr('height', heightSmall + "px");
  svgSmall.attr('width', widthSmall + "px");
  d3.select('#states-small-div').attr('viewBox', '20 20 ' + width + ' ' + height);
  
  if (allExists) reset(dataFile, false);

}
		
		
new ResizeSensor(document.getElementById("states-main-div"), function() {
  setFirstSize();
});

var allStateDemos = {'01': [['Density', 'White', 'Black', 'Latino', 'Asian', 'Other'], [1, 550486, 175422, 13978, 2887, 14600], [2, 709727, 103446, 26096, 6631, 16368], [3, 478176, 131602, 26490, 9858, 10892], [4, 286951, 139533, 14711, 7985, 6863], [5, 238129, 146563, 16125, 7887, 5747], [6, 189061, 138813, 13195, 8480, 5755], [7, 78837, 106331, 7856, 3388, 2918], [8, 13336, 17443, 1731, 543, 492], [9, 7121, 2185, 519, 714, 28], [10, 0, 0, 0, 0, 0]], '02': [['Density', 'White', 'Black', 'Latino', 'Asian', 'Other'], [1, 99645, 2184, 7078, 5467, 37551], [2, 61818, 2391, 4477, 2869, 8766], [3, 39272, 722, 2735, 2965, 5234], [4, 32625, 525, 2290, 2928, 5961], [5, 20526, 946, 2011, 954, 3093], [6, 18750, 1187, 2542, 4212, 5933], [7, 28388, 2928, 3815, 4730, 8974], [8, 27862, 4032, 3778, 4243, 8029], [9, 23400, 2935, 3273, 5067, 6984], [10, 0, 0, 0, 0, 0]], '04': [['Density', 'White', 'Black', 'Latino', 'Asian', 'Other'], [1, 303720, 7704, 96467, 5389, 110031], [2, 135057, 4869, 45829, 2764, 16062], [3, 277513, 12493, 87485, 9667, 17891], [4, 223243, 9896, 72986, 11240, 11725], [5, 347818, 18435, 101727, 18010, 12009], [6, 367129, 16385, 109187, 19374, 13847], [7, 477982, 31476, 182666, 27546, 19687], [8, 607241, 51271, 280892, 42545, 32855], [9, 347049, 47531, 320751, 24768, 29581], [10, 52096, 14385, 91947, 9189, 6808]], '05': [['Density', 'White', 'Black', 'Latino', 'Asian', 'Other'], [1, 592248, 70640, 20227, 2958, 14159], [2, 304748, 33796, 14603, 2381, 8113], [3, 319990, 66865, 21004, 6247, 7757], [4, 182796, 41927, 22098, 6001, 7580], [5, 122415, 39574, 16420, 6827, 6477], [6, 122747, 46527, 17708, 3802, 4524], [7, 58341, 28501, 13662, 2858, 4179], [8, 19003, 3777, 4244, 1095, 802], [9, 1726, 771, 79, 177, 88], [10, 0, 0, 0, 0, 0]], '06': [['Density', 'White', 'Black', 'Latino', 'Asian', 'Other'], [1, 678668, 26097, 279128, 28380, 44389], [2, 589676, 27305, 273871, 51167, 30987], [3, 712542, 39649, 293030, 88185, 37883], [4, 792841, 63097, 429677, 193067, 45490], [5, 900881, 74999, 443792, 197574, 50604], [6, 1053897, 89864, 515055, 261609, 58342], [7, 1312700, 117570, 710843, 366430, 74918], [8, 1988310, 252538, 1341193, 573778, 130021], [9, 2631255, 481767, 2708354, 1365689, 209539], [10, 1737140, 586877, 3375666, 1356867, 172614]], '08': [['Density', 'White', 'Black', 'Latino', 'Asian', 'Other'], [1, 399262, 5344, 67620, 3438, 11625], [2, 214016, 4546, 36546, 4372, 5206], [3, 216930, 3237, 33288, 5401, 5039], [4, 199494, 6389, 42193, 8073, 5880], [5, 243648, 7069, 46691, 9386, 8817], [6, 321750, 14792, 78268, 14503, 10889], [7, 417503, 19890, 95789, 18790, 12166], [8, 526808, 36434, 137957, 27886, 18515], [9, 384102, 54392, 196401, 28441, 18410], [10, 80240, 11581, 28627, 6629, 4224]], '09': [['Density', 'White', 'Black', 'Latino', 'Asian', 'Other'], [1, 19604, 225, 617, 227, 267], [2, 169839, 1879, 4586, 3002, 2557], [3, 484882, 16240, 22368, 17585, 6359], [4, 405497, 21613, 30635, 22792, 5747], [5, 284310, 26122, 29340, 20971, 5458], [6, 226604, 27614, 38340, 12897, 5295], [7, 133048, 27181, 31379, 9934, 3333], [8, 128849, 44783, 62504, 10628, 3611], [9, 107293, 62811, 83360, 12604, 4749], [10, 53703, 54207, 74901, 11652, 3263]], '10': [['Density', 'White', 'Black', 'Latino', 'Asian', 'Other'], [1, 4777, 379, 134, 54, 120], [2, 86057, 13825, 6860, 1061, 1449], [3, 101388, 18688, 7914, 2944, 2133], [4, 77429, 22473, 7397, 5634, 2290], [5, 63253, 24384, 6245, 5275, 1527], [6, 51379, 10545, 5457, 5028, 841], [7, 46044, 13917, 6019, 3829, 968], [8, 32941, 14449, 6326, 3073, 545], [9, 15165, 16521, 3903, 977, 461], [10, 6729, 14563, 3294, 417, 241]], '11': [['Density', 'White', 'Black', 'Latino', 'Asian', 'Other'], [1, 72, 0, 0, 0, 0], [2, 0, 0, 0, 0, 0], [3, 0, 0, 0, 0, 0], [4, 1820, 596, 368, 87, 87], [5, 19, 2704, 54, 14, 1], [6, 4431, 5366, 879, 392, 202], [7, 8255, 8611, 1022, 705, 311], [8, 12224, 15222, 2176, 1059, 395], [9, 48719, 63912, 10881, 5024, 1864], [10, 142130, 155669, 37715, 16080, 6823]], '12': [['Density', 'White', 'Black', 'Latino', 'Asian', 'Other'], [1, 530834, 70347, 72326, 4924, 10803], [2, 735756, 113383, 111120, 14221, 14142], [3, 1064074, 134910, 188754, 32913, 20600], [4, 1425607, 183220, 272541, 53928, 30075], [5, 1547914, 265416, 345401, 69389, 30760], [6, 1261888, 271659, 347580, 65024, 30491], [7, 1311102, 348067, 484007, 77212, 34673], [8, 912583, 397597, 583284, 63267, 29815], [9, 474875, 499775, 790413, 46223, 17174], [10, 93939, 121606, 579295, 10968, 3955]], '13': [['Density', 'White', 'Black', 'Latino', 'Asian', 'Other'], [1, 598359, 218204, 35905, 4511, 8563], [2, 870032, 202023, 52234, 11538, 15152], [3, 741495, 233744, 82035, 20517, 15266], [4, 614022, 347691, 83524, 30994, 17062], [5, 567074, 386513, 89291, 63201, 16896], [6, 482899, 411651, 102072, 70058, 15978], [7, 254212, 345968, 76885, 52609, 12435], [8, 132548, 120729, 42346, 26097, 5384], [9, 59250, 57823, 26208, 15350, 3649], [10, 20367, 16127, 7534, 4836, 1212]], '15': [['Density', 'White', 'Black', 'Latino', 'Asian', 'Other'], [1, 32935, 988, 7583, 20980, 27392], [2, 32373, 689, 7346, 22025, 19542], [3, 32665, 1540, 10114, 26235, 31170], [4, 27370, 2234, 8662, 42383, 28842], [5, 19359, 994, 4013, 24696, 14279], [6, 21401, 956, 7242, 24617, 19276], [7, 21413, 1620, 6140, 29339, 17018], [8, 18094, 3096, 8813, 41846, 25635], [9, 31601, 4265, 14081, 90738, 37014], [10, 35089, 4560, 15233, 135250, 41850]], '16': [['Density', 'White', 'Black', 'Latino', 'Asian', 'Other'], [1, 280495, 1239, 31040, 2487, 11896], [2, 138786, 245, 17578, 1392, 3338], [3, 83332, 518, 7663, 1822, 2345], [4, 101973, 349, 9058, 1876, 2527], [5, 100723, 931, 19160, 1397, 3320], [6, 136612, 1357, 12669, 3666, 3781], [7, 100150, 1143, 15632, 2408, 3283], [8, 87507, 1293, 8823, 2256, 2844], [9, 11154, 266, 1861, 303, 364], [10, 0, 0, 0, 0, 0]], '17': [['Density', 'White', 'Black', 'Latino', 'Asian', 'Other'], [1, 802987, 16102, 19003, 3887, 8343], [2, 513403, 20189, 21854, 5274, 5918], [3, 608708, 40958, 45420, 15994, 8466], [4, 685973, 80001, 61718, 34201, 11387], [5, 695237, 112021, 88490, 54200, 12274], [6, 621875, 115702, 109791, 60946, 11930], [7, 662328, 127379, 118737, 64521, 13905], [8, 718197, 193127, 198545, 89709, 17500], [9, 420927, 280767, 197535, 66371, 14097], [10, 698058, 381835, 578957, 139283, 26695]], '18': [['Density', 'White', 'Black', 'Latino', 'Asian', 'Other'], [1, 654164, 3915, 11014, 2552, 6695], [2, 763176, 11429, 18318, 6217, 9171], [3, 502868, 24098, 25462, 8931, 7432], [4, 538092, 43497, 36194, 16633, 9364], [5, 534766, 68090, 39982, 19251, 10047], [6, 520826, 85778, 42902, 21072, 10077], [7, 350317, 103004, 38528, 12676, 10778], [8, 189121, 68667, 37363, 8016, 6132], [9, 71511, 28582, 19376, 5872, 2533], [10, 21697, 1975, 4359, 4610, 842]], '19': [['Density', 'White', 'Black', 'Latino', 'Asian', 'Other'], [1, 706467, 3393, 17183, 3352, 6021], [2, 171466, 1902, 4685, 2534, 1999], [3, 329920, 9378, 21312, 9200, 6029], [4, 248588, 8744, 12917, 8212, 4530], [5, 149335, 8869, 8515, 5515, 2618], [6, 148931, 7804, 9250, 5934, 2387], [7, 179217, 12132, 12884, 7694, 3672], [8, 127729, 10918, 11047, 6215, 3037], [9, 49428, 7864, 8367, 4546, 1878], [10, 13140, 565, 905, 950, 387]], '20': [['Density', 'White', 'Black', 'Latino', 'Asian', 'Other'], [1, 439630, 5556, 20952, 2514, 11058], [2, 207810, 5045, 20506, 2311, 5733], [3, 192485, 11163, 24696, 4928, 6296], [4, 127238, 10520, 20238, 6156, 4791], [5, 151466, 10360, 16758, 7699, 4993], [6, 220463, 27935, 28004, 12419, 8678], [7, 240790, 31508, 36944, 14852, 7617], [8, 137771, 18295, 29801, 9508, 5897], [9, 12726, 2864, 6044, 1805, 578], [10, 8743, 228, 564, 395, 388]], '21': [['Density', 'White', 'Black', 'Latino', 'Asian', 'Other'], [1, 775603, 15841, 10563, 2212, 8244], [2, 695436, 23349, 13318, 3198, 8067], [3, 341491, 20319, 9576, 4235, 5412], [4, 226703, 24367, 8655, 4305, 4626], [5, 205943, 25764, 9635, 5612, 3919], [6, 231995, 35914, 9817, 9579, 5391], [7, 236531, 43173, 15217, 5613, 5303], [8, 149993, 35198, 9036, 5570, 3896], [9, 87459, 36981, 6733, 3785, 2993], [10, 10667, 1592, 569, 244, 470]], '22': [['Density', 'White', 'Black', 'Latino', 'Asian', 'Other'], [1, 453504, 118300, 14444, 2633, 12741], [2, 383509, 126753, 17845, 5953, 8967], [3, 307120, 141749, 17148, 5053, 7563], [4, 276007, 121719, 18773, 6403, 6717], [5, 189083, 110600, 12572, 8045, 5019], [6, 189098, 126693, 14479, 8304, 5840], [7, 127559, 121225, 13740, 8257, 4133], [8, 137158, 117592, 25732, 10298, 3362], [9, 92782, 79532, 21134, 6858, 2727], [10, 21840, 21225, 5797, 1589, 990]], '23': [['Density', 'White', 'Black', 'Latino', 'Asian', 'Other'], [1, 261095, 919, 2453, 1209, 5905], [2, 391042, 2299, 4175, 2769, 6109], [3, 161677, 1529, 1705, 2585, 3235], [4, 68478, 967, 1124, 1215, 1864], [5, 18310, 741, 608, 640, 311], [6, 45941, 1341, 1275, 1574, 853], [7, 19571, 840, 941, 568, 679], [8, 16988, 762, 553, 477, 645], [9, 18327, 466, 530, 259, 639], [10, 7313, 925, 314, 221, 182]], '24': [['Density', 'White', 'Black', 'Latino', 'Asian', 'Other'], [1, 88945, 9956, 2035, 569, 1452], [2, 342511, 41777, 11312, 6298, 6128], [3, 423510, 78328, 18816, 22985, 9151], [4, 252904, 83162, 20201, 26234, 6525], [5, 230068, 117207, 23319, 28271, 8991], [6, 258007, 137284, 34308, 42557, 9323], [7, 274225, 172931, 47400, 51627, 11583], [8, 292783, 212822, 60641, 48103, 12143], [9, 256720, 287846, 109283, 50527, 14706], [10, 107438, 216175, 56402, 19018, 7543]], '25': [['Density', 'White', 'Black', 'Latino', 'Asian', 'Other'], [1, 47749, 447, 868, 351, 700], [2, 244098, 3226, 5305, 3554, 3315], [3, 723450, 14437, 22555, 20871, 12414], [4, 730545, 21198, 27129, 39360, 11462], [5, 483209, 17090, 24005, 30001, 7480], [6, 352097, 21368, 29613, 29540, 8840], [7, 344823, 39424, 40145, 24292, 10545], [8, 296679, 30793, 56151, 27808, 7150], [9, 303610, 50166, 101385, 48792, 11971], [10, 546247, 175314, 213115, 114566, 26121]], '26': [['Density', 'White', 'Black', 'Latino', 'Asian', 'Other'], [1, 704184, 9117, 14924, 2698, 20106], [2, 1152429, 18243, 37321, 9098, 18691], [3, 737026, 26098, 23659, 11336, 15957], [4, 658358, 56267, 28657, 25712, 14389], [5, 617846, 87130, 30136, 34715, 15165], [6, 643552, 141903, 38813, 41324, 20344], [7, 607629, 194549, 39165, 36980, 19415], [8, 640620, 254421, 51893, 38469, 23263], [9, 189448, 222393, 29491, 14097, 11330], [10, 50547, 11992, 11502, 9443, 2596]], '27': [['Density', 'White', 'Black', 'Latino', 'Asian', 'Other'], [1, 784804, 3959, 16266, 4908, 25179], [2, 319438, 2733, 8325, 3952, 5183], [3, 426705, 7608, 16015, 9799, 9038], [4, 372408, 14778, 15660, 16568, 7653], [5, 362349, 16513, 14237, 21273, 7685], [6, 442036, 27509, 18379, 32836, 9838], [7, 357202, 37692, 25295, 28672, 12227], [8, 205699, 33609, 20829, 22102, 8601], [9, 184647, 44871, 22697, 33264, 10458], [10, 74887, 24054, 15261, 9814, 6337]], '28': [['Density', 'White', 'Black', 'Latino', 'Asian', 'Other'], [1, 523224, 274748, 15894, 2121, 7081], [2, 250492, 74222, 7151, 3055, 5387], [3, 228666, 122754, 12193, 5599, 4395], [4, 170952, 134108, 9237, 5347, 3318], [5, 87433, 80137, 5571, 2793, 1944], [6, 51490, 70637, 4130, 2603, 1589], [7, 19693, 44407, 2312, 786, 721], [8, 8442, 10172, 455, 424, 234], [9, 0, 0, 0, 0, 0], [10, 0, 0, 0, 0, 0]], '29': [['Density', 'White', 'Black', 'Latino', 'Asian', 'Other'], [1, 945538, 13539, 18858, 3431, 17893], [2, 417148, 9773, 9345, 2820, 9043], [3, 455331, 34875, 16027, 6432, 10075], [4, 440659, 34384, 17351, 11828, 10483], [5, 395206, 53596, 18271, 11759, 9026], [6, 453162, 95476, 23979, 16806, 12690], [7, 373071, 101663, 23499, 14426, 10603], [8, 236428, 110319, 13846, 10448, 8900], [9, 96853, 48340, 10813, 8530, 4278], [10, 20626, 13208, 2088, 2500, 1117]], '30': [['Density', 'White', 'Black', 'Latino', 'Asian', 'Other'], [1, 288584, 671, 7481, 1649, 34161], [2, 66620, 138, 1806, 533, 2041], [3, 84279, 479, 2766, 1071, 6756], [4, 78740, 270, 2525, 597, 2746], [5, 38023, 196, 1326, 326, 1952], [6, 45178, 587, 2608, 262, 3803], [7, 59758, 651, 2179, 335, 1964], [8, 46490, 321, 2124, 1070, 2919], [9, 6515, 130, 293, 348, 443], [10, 0, 0, 0, 0, 0]], '31': [['Density', 'White', 'Black', 'Latino', 'Asian', 'Other'], [1, 317758, 1282, 12380, 1304, 7158], [2, 96451, 1253, 9959, 1094, 1911], [3, 128587, 2885, 13222, 2037, 2284], [4, 56600, 1018, 7832, 1415, 782], [5, 77087, 4171, 10799, 2979, 1680], [6, 123367, 10532, 11797, 4987, 3176], [7, 159447, 15945, 19002, 5482, 4078], [8, 168714, 16469, 20155, 6681, 3914], [9, 44183, 7237, 10944, 4241, 1945], [10, 12090, 1599, 2374, 1452, 627]], '32': [['Density', 'White', 'Black', 'Latino', 'Asian', 'Other'], [1, 113216, 5384, 22690, 4724, 9663], [2, 56825, 1564, 6959, 3176, 1593], [3, 79013, 4242, 13450, 6569, 3790], [4, 66102, 5439, 16662, 5335, 3065], [5, 79213, 12678, 26693, 12567, 5293], [6, 98416, 8115, 24543, 12527, 4761], [7, 132233, 15947, 40298, 22685, 7679], [8, 203440, 32394, 83080, 33318, 12486], [9, 313259, 75048, 224064, 68250, 25656], [10, 72404, 26490, 82705, 24819, 7530]], '33': [['Density', 'White', 'Black', 'Latino', 'Asian', 'Other'], [1, 134593, 748, 1305, 1179, 1954], [2, 234408, 1027, 3103, 2414, 2852], [3, 253471, 2718, 4971, 5106, 3416], [4, 144990, 1518, 3557, 4365, 2073], [5, 50674, 1229, 3201, 3646, 911], [6, 65194, 1751, 2633, 3121, 1123], [7, 52845, 1596, 2715, 3177, 1026], [8, 17784, 1072, 2503, 561, 329], [9, 20408, 1196, 4041, 1475, 725], [10, 9967, 813, 2207, 857, 129]], '34': [['Density', 'White', 'Black', 'Latino', 'Asian', 'Other'], [1, 18342, 984, 830, 337, 292], [2, 254425, 14898, 15785, 7798, 3626], [3, 468471, 32515, 39391, 30435, 6295], [4, 489261, 42005, 50398, 67758, 8077], [5, 605043, 57564, 74340, 86287, 9188], [6, 592248, 64182, 64341, 70844, 9176], [7, 551216, 84202, 98641, 83734, 11260], [8, 411604, 101761, 124355, 84563, 8797], [9, 351657, 159356, 194359, 94471, 12137], [10, 318042, 361061, 586343, 129565, 13838]], '35': [['Density', 'White', 'Black', 'Latino', 'Asian', 'Other'], [1, 133557, 3361, 137342, 2307, 73397], [2, 62295, 1525, 51237, 1537, 7766], [3, 78180, 2588, 78445, 2708, 24336], [4, 72871, 2297, 73695, 1772, 9725], [5, 68585, 4878, 69303, 3142, 6935], [6, 57849, 3945, 73885, 3058, 6359], [7, 81743, 4490, 91997, 3717, 7437], [8, 82274, 4805, 79079, 3959, 7979], [9, 35404, 4179, 47830, 2029, 6950], [10, 485, 61, 3978, 25, 237]], '36': [['Density', 'White', 'Black', 'Latino', 'Asian', 'Other'], [1, 715456, 14625, 16787, 4328, 8644], [2, 1130983, 28799, 46607, 13503, 18589], [3, 640590, 28644, 43251, 22384, 8403], [4, 732437, 43287, 61344, 35412, 11428], [5, 727145, 53555, 63966, 42081, 10996], [6, 720370, 59476, 81232, 43656, 11921], [7, 669689, 70438, 97122, 41565, 12282], [8, 589913, 117579, 116321, 47250, 14609], [9, 810091, 247417, 247240, 102112, 22442], [10, 2283347, 1719654, 1932279, 983125, 109355]], '37': [['Density', 'White', 'Black', 'Latino', 'Asian', 'Other'], [1, 480484, 151144, 27826, 3344, 17999], [2, 1279157, 242185, 93846, 10939, 57261], [3, 1220264, 234676, 102597, 28635, 36826], [4, 717106, 218471, 83741, 33746, 22594], [5, 527724, 245468, 77831, 32243, 16706], [6, 520328, 261592, 79732, 47059, 17267], [7, 278240, 162190, 46721, 29089, 9984], [8, 121273, 94274, 35027, 13272, 6826], [9, 33366, 17020, 9348, 5267, 1759], [10, 513, 1197, 1136, 347, 46]], '38': [['Density', 'White', 'Black', 'Latino', 'Asian', 'Other'], [1, 157756, 860, 3945, 765, 14201], [2, 26457, 223, 597, 79, 4968], [3, 88014, 1808, 3369, 1635, 3426], [4, 37578, 2193, 2004, 806, 2027], [5, 26632, 655, 707, 727, 983], [6, 55109, 1603, 1260, 1011, 2583], [7, 51262, 2063, 1356, 1404, 2621], [8, 45064, 2058, 2057, 1026, 1638], [9, 17978, 884, 540, 701, 476], [10, 0, 0, 0, 0, 0]], '39': [['Density', 'White', 'Black', 'Latino', 'Asian', 'Other'], [1, 637767, 4375, 9772, 1762, 6832], [2, 1253419, 18374, 17300, 6770, 14629], [3, 998165, 41992, 22578, 14466, 15372], [4, 906588, 81267, 28427, 22525, 16359], [5, 917645, 102246, 31729, 33037, 17930], [6, 982931, 177206, 40915, 34742, 20737], [7, 659893, 183686, 33709, 25177, 19849], [8, 567872, 235692, 37493, 19446, 20675], [9, 348440, 184251, 30324, 21694, 14190], [10, 68931, 17139, 9094, 4510, 2577]], '40': [['Density', 'White', 'Black', 'Latino', 'Asian', 'Other'], [1, 567875, 17241, 34529, 3637, 125897], [2, 281402, 14019, 22071, 3941, 51119], [3, 230534, 24520, 20908, 4007, 42828], [4, 219374, 19079, 17455, 6974, 32397], [5, 160299, 26717, 19197, 7315, 23069], [6, 173555, 33018, 24030, 8388, 24128], [7, 262270, 35031, 42274, 13291, 33081], [8, 137699, 28696, 39488, 10273, 19018], [9, 33278, 8747, 16819, 4526, 5054], [10, 6528, 1578, 927, 576, 1299]], '41': [['Density', 'White', 'Black', 'Latino', 'Asian', 'Other'], [1, 418282, 2503, 27013, 3232, 22020], [2, 258551, 1254, 28315, 3223, 8633], [3, 234107, 2454, 28280, 7987, 9034], [4, 144747, 1890, 22249, 3724, 6934], [5, 205245, 2076, 25977, 10087, 8837], [6, 192618, 3118, 21578, 9645, 9050], [7, 302119, 6148, 34592, 14886, 13341], [8, 387284, 11898, 66457, 39131, 22123], [9, 305439, 20261, 55605, 37109, 19534], [10, 68478, 4729, 10254, 5771, 4650]], '42': [['Density', 'White', 'Black', 'Latino', 'Asian', 'Other'], [1, 600311, 6248, 6962, 2200, 4678], [2, 1383465, 29747, 30809, 8262, 10034], [3, 1214123, 39413, 44289, 24181, 11406], [4, 930738, 42930, 37358, 37067, 11480], [5, 762705, 53574, 29133, 37922, 9565], [6, 809121, 65611, 38334, 36500, 11892], [7, 714254, 64994, 42777, 25274, 11373], [8, 591986, 88221, 59919, 24695, 13041], [9, 516572, 133413, 68225, 33798, 10712], [10, 490941, 525053, 211577, 94716, 20512]], '44': [['Density', 'White', 'Black', 'Latino', 'Asian', 'Other'], [1, 0, 0, 0, 0, 0], [2, 51809, 428, 923, 633, 785], [3, 96846, 1246, 1775, 2111, 1476], [4, 80763, 1306, 2403, 1778, 920], [5, 106325, 2258, 4656, 3481, 1824], [6, 63824, 2795, 4144, 2398, 1437], [7, 71036, 2852, 6045, 2701, 2164], [8, 67129, 8356, 15524, 4762, 2965], [9, 64588, 12112, 20156, 4977, 2717], [10, 32210, 17941, 47658, 5022, 3047]], '45': [['Density', 'White', 'Black', 'Latino', 'Asian', 'Other'], [1, 293577, 182572, 10614, 1862, 6219], [2, 494095, 182806, 22335, 3946, 10197], [3, 539877, 167486, 30609, 8947, 10186], [4, 450676, 135298, 32696, 12864, 9545], [5, 377182, 150326, 34038, 15151, 8672], [6, 216496, 94039, 24794, 7830, 5993], [7, 98465, 56025, 10458, 3756, 2860], [8, 27245, 15643, 2558, 1336, 920], [9, 7612, 7160, 686, 428, 557], [10, 5691, 3410, 512, 165, 264]], '46': [['Density', 'White', 'Black', 'Latino', 'Asian', 'Other'], [1, 210070, 1155, 4651, 1137, 32079], [2, 66596, 718, 2167, 1354, 6452], [3, 88641, 1467, 2716, 1338, 4977], [4, 36698, 414, 752, 1012, 578], [5, 34088, 1203, 1886, 705, 1941], [6, 24072, 960, 1123, 347, 1969], [7, 48828, 1726, 2449, 1523, 3832], [8, 40795, 1347, 1344, 948, 2356], [9, 4521, 727, 320, 95, 406], [10, 0, 0, 0, 0, 0]], '47': [['Density', 'White', 'Black', 'Latino', 'Asian', 'Other'], [1, 673818, 42562, 13148, 2568, 11498], [2, 879186, 44224, 20445, 5018, 14342], [3, 713021, 61945, 28924, 10974, 11453], [4, 568654, 119107, 32232, 18913, 11260], [5, 420755, 132883, 30070, 14604, 9439], [6, 325325, 132855, 27481, 14679, 8889], [7, 191787, 140140, 23342, 7886, 7095], [8, 86985, 109201, 21716, 5781, 3921], [9, 35083, 25380, 6837, 3510, 1648], [10, 1517, 5374, 740, 297, 42]], '48': [['Density', 'White', 'Black', 'Latino', 'Asian', 'Other'], [1, 1385242, 123710, 470257, 10346, 27324], [2, 981816, 97964, 396924, 15379, 20916], [3, 939159, 141356, 502661, 29321, 25297], [4, 886841, 210123, 648493, 61304, 25576], [5, 844479, 233626, 620986, 111587, 24674], [6, 1095617, 360575, 750609, 154929, 36748], [7, 1263931, 387488, 1069322, 172983, 46016], [8, 1314438, 474309, 1297370, 207983, 50850], [9, 592418, 293394, 1134269, 139369, 28943], [10, 130098, 95426, 229888, 48368, 9102]], '49': [['Density', 'White', 'Black', 'Latino', 'Asian', 'Other'], [1, 205882, 1072, 15397, 1457, 10710], [2, 98057, 621, 9553, 1115, 2834], [3, 120779, 1322, 11421, 2755, 3632], [4, 150514, 1614, 16591, 4769, 4404], [5, 124672, 808, 16769, 3058, 4811], [6, 162404, 2333, 23194, 5015, 5738], [7, 251418, 3340, 32864, 8169, 7516], [8, 317012, 4981, 53631, 12367, 11792], [9, 224798, 5095, 68531, 12245, 15247], [10, 31200, 669, 3966, 2541, 1895]], '50': [['Density', 'White', 'Black', 'Latino', 'Asian', 'Other'], [1, 167763, 704, 2221, 873, 3286], [2, 152600, 1307, 2328, 1216, 2393], [3, 60786, 951, 1000, 1641, 859], [4, 18145, 348, 668, 423, 367], [5, 20871, 680, 519, 948, 384], [6, 12597, 176, 237, 737, 271], [7, 14418, 478, 333, 478, 474], [8, 14376, 411, 535, 1012, 243], [9, 2595, 98, 0, 0, 33], [10, 8840, 390, 216, 411, 128]], '51': [['Density', 'White', 'Black', 'Latino', 'Asian', 'Other'], [1, 606387, 123369, 15013, 3391, 10259], [2, 741491, 95707, 26216, 9376, 12926], [3, 364030, 68191, 25834, 15772, 10350], [4, 377371, 99588, 30706, 23584, 10291], [5, 439207, 138715, 42578, 45344, 15337], [6, 439869, 181015, 54861, 54969, 18796], [7, 439553, 162426, 72969, 71764, 18537], [8, 387178, 180676, 81570, 72659, 17645], [9, 251318, 107320, 93913, 70615, 15000], [10, 150853, 62095, 60486, 38966, 8077]], '53': [['Density', 'White', 'Black', 'Latino', 'Asian', 'Other'], [1, 381934, 3033, 52725, 5305, 25006], [2, 344074, 3667, 36955, 6938, 17630], [3, 485439, 7730, 37160, 19185, 23162], [4, 403265, 11329, 44958, 32173, 19949], [5, 347821, 12956, 47159, 37078, 20447], [6, 483819, 24530, 72757, 65892, 31470], [7, 551107, 29740, 76508, 81015, 39679], [8, 575102, 55694, 97836, 107486, 47836], [9, 309995, 31999, 62005, 66565, 30265], [10, 162851, 14702, 16578, 46527, 13871]], '54': [['Density', 'White', 'Black', 'Latino', 'Asian', 'Other'], [1, 427750, 7479, 3951, 963, 4785], [2, 336555, 6068, 3345, 1740, 3824], [3, 269172, 12955, 4552, 2383, 4094], [4, 98538, 6041, 2330, 1438, 1264], [5, 78509, 3818, 1244, 748, 1292], [6, 81468, 6020, 1394, 1621, 1383], [7, 26253, 3851, 565, 805, 812], [8, 28074, 4236, 859, 1507, 1274], [9, 9606, 555, 206, 292, 432], [10, 3165, 563, 106, 133, 76]], '55': [['Density', 'White', 'Black', 'Latino', 'Asian', 'Other'], [1, 842855, 5450, 18113, 4010, 21428], [2, 570634, 5973, 15426, 6091, 8443], [3, 496829, 8460, 15055, 8538, 7977], [4, 474199, 10297, 20420, 14076, 8496], [5, 335051, 15559, 16496, 15682, 6346], [6, 325586, 25558, 19561, 15716, 6642], [7, 272279, 22904, 27664, 12522, 6851], [8, 210126, 46154, 30312, 13719, 7230], [9, 171818, 81665, 28805, 10514, 6535], [10, 93215, 30508, 39918, 7955, 4341]], '56': [['Density', 'White', 'Black', 'Latino', 'Asian', 'Other'], [1, 141051, 569, 8329, 943, 6649], [2, 45982, 116, 5150, 513, 1027], [3, 47329, 771, 5866, 509, 2046], [4, 32811, 581, 3524, 373, 1084], [5, 35885, 776, 6096, 440, 1501], [6, 45716, 1179, 4318, 787, 1345], [7, 23600, 568, 2622, 176, 620], [8, 9569, 27, 903, 123, 224], [9, 2640, 9, 188, 248, 73], [10, 0, 0, 0, 0, 0]]};
var allStatesAge5 = {'01': [['Density', '18-29', '30-39', '40-49', '50-59', '60+'], [1, 133499, 107646, 125100, 145182, 245686], [2, 155629, 137425, 151143, 162843, 255150], [3, 136646, 109850, 110503, 117857, 181979], [4, 100403, 76251, 74513, 80204, 124503], [5, 91170, 67228, 65323, 74179, 116326], [6, 91843, 61439, 55055, 56254, 90470], [7, 68224, 34500, 27115, 27042, 42400], [8, 10906, 6613, 4463, 4912, 6651], [9, 5349, 1679, 1194, 861, 1465], [10, 0, 0, 0, 0, 0]], '02': [['Density', '18-29', '30-39', '40-49', '50-59', '60+'], [1, 35314, 28141, 24980, 29843, 33647], [2, 22674, 14796, 13355, 13901, 15595], [3, 11019, 9786, 8157, 9766, 12200], [4, 10296, 8054, 7490, 8322, 10167], [5, 6314, 6212, 4542, 5023, 5439], [6, 8927, 6278, 5013, 5428, 6978], [7, 13315, 9608, 7525, 8865, 9522], [8, 13057, 9938, 7674, 8568, 8707], [9, 11756, 7982, 6592, 7085, 8244], [10, 0, 0, 0, 0, 0]], '04': [['Density', '18-29', '30-39', '40-49', '50-59', '60+'], [1, 93142, 73282, 75428, 91909, 189531], [2, 32067, 27745, 29191, 34754, 80743], [3, 73051, 63725, 61620, 66984, 139561], [4, 56474, 49884, 53189, 59053, 110442], [5, 84978, 75606, 77839, 77023, 182437], [6, 90897, 75916, 75905, 82179, 200936], [7, 157252, 129086, 128829, 124054, 200002], [8, 240792, 190808, 176595, 168076, 238324], [9, 237994, 149045, 127790, 115311, 139352], [10, 72355, 34663, 27508, 19323, 20557]], '05': [['Density', '18-29', '30-39', '40-49', '50-59', '60+'], [1, 113716, 99470, 112490, 134078, 240422], [2, 67906, 57070, 62848, 67393, 108360], [3, 89277, 74125, 69707, 70019, 118708], [4, 65524, 46645, 42358, 41182, 64693], [5, 50479, 35134, 30208, 28236, 47621], [6, 49120, 37511, 29769, 31093, 47761], [7, 31392, 19427, 16465, 16827, 23430], [8, 14881, 4400, 2640, 2971, 4029], [9, 1026, 623, 358, 306, 528], [10, 0, 0, 0, 0, 0]], '06': [['Density', '18-29', '30-39', '40-49', '50-59', '60+'], [1, 198508, 155546, 157293, 197248, 347867], [2, 205679, 147472, 150190, 179273, 290271], [3, 219338, 176029, 198145, 222704, 354956], [4, 309126, 249474, 262568, 278431, 424104], [5, 353418, 274664, 284197, 299814, 455433], [6, 391058, 316170, 349843, 357688, 563512], [7, 549648, 438601, 446188, 464590, 682957], [8, 949351, 749706, 743960, 754036, 1087765], [9, 1756422, 1395342, 1312497, 1233918, 1695473], [10, 1971610, 1537450, 1253729, 1075010, 1386118]], '08': [['Density', '18-29', '30-39', '40-49', '50-59', '60+'], [1, 73208, 75166, 77591, 102422, 158821], [2, 49699, 44551, 45729, 52892, 71750], [3, 42760, 46079, 49384, 50710, 74948], [4, 55717, 47162, 46350, 47932, 64680], [5, 67397, 58694, 55696, 55105, 78673], [6, 94440, 86436, 77213, 75527, 106568], [7, 116543, 104528, 98652, 97815, 146529], [8, 167163, 146040, 127956, 125989, 180370], [9, 200882, 148885, 110436, 97684, 123763], [10, 54039, 28724, 15876, 13307, 19307]], '09': [['Density', '18-29', '30-39', '40-49', '50-59', '60+'], [1, 2440, 1961, 3118, 4897, 8517], [2, 27199, 22400, 31485, 41078, 59690], [3, 82317, 66752, 98408, 123582, 175960], [4, 82801, 61616, 85467, 101221, 154741], [5, 62791, 55900, 61807, 71827, 113399], [6, 60432, 49580, 52272, 57342, 90845], [7, 51095, 32775, 32351, 35104, 53305], [8, 60255, 46876, 42170, 41909, 58524], [9, 72292, 51616, 45113, 42415, 58063], [10, 70277, 38103, 29119, 26038, 32501]], '10': [['Density', '18-29', '30-39', '40-49', '50-59', '60+'], [1, 1031, 760, 994, 1166, 1513], [2, 18029, 15338, 18209, 20900, 36745], [3, 22834, 17906, 17961, 23446, 50854], [4, 20959, 16328, 19961, 21571, 36305], [5, 23319, 16709, 15094, 18918, 26643], [6, 14979, 12305, 11720, 13688, 20496], [7, 19064, 12136, 10475, 12116, 16916], [8, 14692, 9647, 9206, 9636, 14123], [9, 9515, 8064, 5336, 5941, 8171], [10, 6688, 4772, 4004, 4084, 5659]], '11': [['Density', '18-29', '30-39', '40-49', '50-59', '60+'], [1, 32, 40, 0, 0, 0], [2, 0, 0, 0, 0, 0], [3, 0, 0, 0, 0, 0], [4, 1319, 915, 365, 273, 86], [5, 1182, 395, 381, 519, 315], [6, 2051, 1641, 1837, 1989, 3752], [7, 4135, 3527, 3512, 2765, 4957], [8, 6943, 5675, 4518, 4915, 8957], [9, 31448, 25390, 20436, 20421, 32285], [10, 111005, 90492, 49355, 43831, 62674]], '12': [['Density', '18-29', '30-39', '40-49', '50-59', '60+'], [1, 118165, 96581, 108388, 127496, 238499], [2, 168861, 143183, 151356, 182958, 341848], [3, 231446, 199920, 218188, 250570, 539677], [4, 321720, 262050, 295836, 339556, 744420], [5, 381853, 315307, 347503, 393696, 817806], [6, 382705, 295086, 313342, 343468, 639340], [7, 468301, 361791, 360545, 391615, 668895], [8, 422889, 340125, 326545, 344101, 545493], [9, 446166, 314840, 305417, 294036, 453975], [10, 164501, 146502, 147759, 133276, 205592]], '13': [['Density', '18-29', '30-39', '40-49', '50-59', '60+'], [1, 160882, 127462, 143108, 163443, 270131], [2, 234930, 183512, 193338, 211032, 327446], [3, 223648, 189088, 212337, 195047, 272258], [4, 241844, 190268, 205509, 196921, 257940], [5, 235969, 197143, 217843, 205401, 265421], [6, 235916, 203426, 197633, 192617, 251304], [7, 203666, 150375, 131692, 117221, 138054], [8, 87893, 78541, 59285, 46800, 54212], [9, 66246, 38238, 24419, 16563, 16505], [10, 25565, 10029, 6151, 4343, 3980]], '15': [['Density', '18-29', '30-39', '40-49', '50-59', '60+'], [1, 14794, 13134, 14290, 16603, 31057], [2, 13875, 14265, 13065, 14954, 25816], [3, 23027, 16898, 16092, 18029, 27667], [4, 24140, 18109, 17093, 17536, 32613], [5, 10111, 9733, 10292, 11050, 22155], [6, 17186, 11829, 10091, 11945, 22441], [7, 15648, 14145, 12071, 12344, 21322], [8, 25021, 16807, 15444, 15770, 24442], [9, 37520, 32974, 28650, 28141, 50414], [10, 50534, 39916, 37345, 38460, 65727]], '16': [['Density', '18-29', '30-39', '40-49', '50-59', '60+'], [1, 54330, 48328, 50257, 62690, 111521], [2, 29500, 27251, 28479, 28458, 47651], [3, 27079, 17848, 14813, 14066, 21874], [4, 21195, 20150, 20745, 19831, 33858], [5, 29033, 24016, 21020, 19535, 31927], [6, 35783, 30747, 25139, 26175, 40178], [7, 33655, 22937, 17951, 18649, 29424], [8, 28762, 20095, 15670, 14633, 23563], [9, 6416, 2174, 1292, 1914, 2152], [10, 0, 0, 0, 0, 0]], '17': [['Density', '18-29', '30-39', '40-49', '50-59', '60+'], [1, 135519, 122676, 138557, 171235, 282260], [2, 97271, 86018, 97302, 111164, 174852], [3, 130170, 113433, 125369, 134251, 216145], [4, 177087, 144731, 148845, 162681, 239625], [5, 183253, 150852, 163590, 185378, 278696], [6, 181646, 149627, 160456, 170681, 257456], [7, 197472, 164188, 169295, 185440, 269916], [8, 273088, 210473, 207514, 219476, 305909], [9, 234718, 173593, 163650, 165681, 241390], [10, 514322, 410409, 294249, 255536, 348384]], '18': [['Density', '18-29', '30-39', '40-49', '50-59', '60+'], [1, 109377, 98683, 114479, 141132, 214653], [2, 148084, 124828, 138163, 157715, 239471], [3, 107169, 93592, 98078, 105569, 164295], [4, 124949, 112183, 111771, 114482, 179929], [5, 141634, 114338, 112372, 119294, 184334], [6, 154262, 117378, 109119, 118007, 181578], [7, 135796, 89967, 80737, 84062, 124497], [8, 91828, 58815, 49095, 47409, 62088], [9, 56199, 21465, 16592, 16779, 16839], [10, 27060, 1990, 1295, 1597, 1535]], '19': [['Density', '18-29', '30-39', '40-49', '50-59', '60+'], [1, 112222, 104815, 114121, 152153, 253082], [2, 32331, 30572, 29504, 34796, 55380], [3, 77473, 58167, 56886, 64423, 118867], [4, 61623, 52639, 46551, 45597, 76575], [5, 38877, 31142, 27264, 29713, 47840], [6, 40523, 31645, 27353, 29535, 45223], [7, 57589, 38207, 32446, 33668, 53674], [8, 45338, 28797, 23573, 24660, 36568], [9, 34439, 10112, 8767, 8373, 10348], [10, 13817, 731, 331, 449, 619]], '20': [['Density', '18-29', '30-39', '40-49', '50-59', '60+'], [1, 79165, 69177, 72735, 98772, 159834], [2, 46515, 38600, 38625, 44260, 73405], [3, 58056, 41274, 36106, 38739, 65333], [4, 36699, 31286, 30255, 29554, 41149], [5, 42401, 34269, 35689, 32383, 46534], [6, 71852, 52193, 43197, 49777, 80477], [7, 76594, 60043, 51925, 56381, 86720], [8, 60706, 39180, 27747, 30463, 43175], [9, 9683, 4921, 3036, 2972, 3371], [10, 8744, 537, 303, 320, 414]], '21': [['Density', '18-29', '30-39', '40-49', '50-59', '60+'], [1, 139995, 119468, 140831, 161965, 250155], [2, 139294, 117428, 128046, 142587, 215751], [3, 74097, 62556, 65913, 69542, 108917], [4, 56218, 47853, 46930, 46057, 71578], [5, 58009, 42973, 42150, 42225, 65421], [6, 62772, 50201, 49281, 51110, 79330], [7, 66172, 56128, 48512, 52813, 82115], [8, 55107, 35674, 31003, 33682, 48198], [9, 52229, 23193, 17625, 19984, 24899], [10, 10500, 937, 563, 595, 947]], '22': [['Density', '18-29', '30-39', '40-49', '50-59', '60+'], [1, 115306, 97182, 96245, 111033, 181723], [2, 109816, 94432, 93459, 100753, 144493], [3, 112970, 83144, 79392, 82568, 120402], [4, 102705, 79703, 67555, 75216, 104293], [5, 76820, 58190, 50528, 54332, 85376], [6, 76174, 59604, 52054, 61012, 95313], [7, 70547, 48038, 39690, 47682, 68687], [8, 73617, 50614, 43322, 50661, 75672], [9, 46245, 39774, 32120, 34167, 50219], [10, 16691, 11053, 7571, 6664, 9353]], '23': [['Density', '18-29', '30-39', '40-49', '50-59', '60+'], [1, 38515, 34555, 42425, 57223, 98846], [2, 64304, 57563, 67733, 85452, 131318], [3, 27252, 23177, 28685, 33124, 58493], [4, 17570, 10081, 11388, 12867, 21725], [5, 4844, 3338, 3072, 3608, 5748], [6, 12267, 7682, 7828, 9222, 13916], [7, 8621, 3134, 2820, 3215, 4809], [8, 5349, 4078, 2957, 2853, 4188], [9, 6620, 3047, 3032, 2949, 4573], [10, 3548, 1819, 1238, 993, 1357]], '24': [['Density', '18-29', '30-39', '40-49', '50-59', '60+'], [1, 16336, 12005, 14929, 22076, 37610], [2, 72055, 54073, 69280, 86954, 125628], [3, 98299, 73003, 101962, 119410, 159989], [4, 69255, 59555, 69633, 79022, 111125], [5, 78752, 67418, 72871, 78490, 110290], [6, 95715, 79844, 86113, 92222, 127316], [7, 112089, 99615, 97067, 101986, 146431], [8, 135018, 114451, 111221, 111042, 154118], [9, 180696, 147438, 116560, 115046, 158291], [10, 111985, 89561, 61757, 61743, 81121]], '25': [['Density', '18-29', '30-39', '40-49', '50-59', '60+'], [1, 6451, 5557, 7753, 11161, 19174], [2, 39722, 31780, 42602, 55054, 90334], [3, 124480, 101023, 139727, 171542, 256884], [4, 143102, 111313, 150522, 172999, 251412], [5, 92127, 83084, 102468, 110855, 172960], [6, 85519, 68316, 73881, 82832, 130510], [7, 89884, 75303, 79290, 84745, 129635], [8, 102765, 72736, 66798, 71334, 104306], [9, 131821, 98059, 81970, 83034, 118492], [10, 372514, 217005, 148652, 136573, 194509]], '26': [['Density', '18-29', '30-39', '40-49', '50-59', '60+'], [1, 109858, 93357, 113566, 154865, 279383], [2, 204060, 170068, 204912, 259557, 397030], [3, 149899, 120340, 136785, 160455, 246550], [4, 157121, 119370, 135864, 147495, 223396], [5, 157987, 123755, 130375, 145618, 227038], [6, 184372, 139286, 146181, 162307, 253500], [7, 217531, 139238, 143018, 156302, 241509], [8, 249887, 174440, 163738, 174820, 245538], [9, 141456, 77308, 71789, 72001, 104054], [10, 52993, 10129, 8356, 6701, 7897]], '27': [['Density', '18-29', '30-39', '40-49', '50-59', '60+'], [1, 122591, 119107, 127983, 173893, 291515], [2, 58723, 53643, 58166, 70585, 98479], [3, 85986, 80603, 81670, 90944, 129927], [4, 91257, 77371, 73358, 77054, 107981], [5, 79851, 70946, 70993, 82484, 117783], [6, 101582, 94635, 92218, 101258, 140808], [7, 102000, 87020, 72463, 82274, 117305], [8, 76211, 58623, 44480, 45003, 66496], [9, 95056, 60803, 44207, 43280, 52582], [10, 57751, 27265, 15631, 13300, 16406]], '28': [['Density', '18-29', '30-39', '40-49', '50-59', '60+'], [1, 160412, 127785, 136930, 153132, 244293], [2, 69219, 55656, 59915, 62158, 93349], [3, 81067, 65751, 65222, 63859, 97534], [4, 77276, 53926, 48868, 55525, 87073], [5, 49599, 31478, 24540, 28635, 43519], [6, 33154, 23446, 21270, 20681, 31810], [7, 18106, 13687, 11421, 10864, 13804], [8, 13330, 2024, 1245, 1499, 1629], [9, 0, 0, 0, 0, 0], [10, 0, 0, 0, 0, 0]], '29': [['Density', '18-29', '30-39', '40-49', '50-59', '60+'], [1, 166042, 140636, 158627, 200065, 333881], [2, 77619, 69569, 75459, 89270, 136212], [3, 106633, 87080, 85890, 94248, 148798], [4, 113556, 89139, 81344, 90483, 140115], [5, 108544, 84975, 76776, 82242, 135321], [6, 126959, 99116, 97228, 108530, 170224], [7, 119558, 90607, 79978, 95031, 137936], [8, 98491, 70197, 55672, 62625, 92880], [9, 61177, 30322, 22242, 23202, 31853], [10, 14354, 8268, 4897, 5402, 6618]], '30': [['Density', '18-29', '30-39', '40-49', '50-59', '60+'], [1, 50887, 46646, 47345, 67989, 119678], [2, 10713, 10656, 11716, 14366, 23687], [3, 22337, 17109, 14649, 15851, 25405], [4, 17243, 13864, 12515, 14556, 26700], [5, 7476, 7208, 6976, 7381, 12782], [6, 14953, 9167, 6737, 8426, 13155], [7, 16563, 12381, 9237, 9950, 16747], [8, 18975, 9169, 5977, 7024, 11779], [9, 5259, 903, 480, 534, 553], [10, 0, 0, 0, 0, 0]], '31': [['Density', '18-29', '30-39', '40-49', '50-59', '60+'], [1, 51629, 47012, 51457, 69919, 119865], [2, 21111, 17334, 16875, 19474, 35868], [3, 31144, 24645, 23887, 25468, 43787], [4, 15393, 13239, 11067, 11371, 16577], [5, 20973, 19284, 17117, 16892, 22431], [6, 35347, 29310, 24783, 25045, 39273], [7, 49789, 37262, 31668, 34392, 50799], [8, 55263, 43154, 33050, 35452, 49004], [9, 23020, 14397, 9483, 9238, 12412], [10, 11061, 2595, 1567, 1576, 1343]], '32': [['Density', '18-29', '30-39', '40-49', '50-59', '60+'], [1, 26132, 24724, 25086, 29171, 50564], [2, 9403, 8530, 9876, 13396, 28911], [3, 15974, 17528, 17583, 19727, 36239], [4, 17628, 15619, 16964, 17500, 28891], [5, 26331, 25026, 25685, 23186, 36192], [6, 26229, 24149, 23136, 25415, 49429], [7, 41909, 35174, 36765, 36888, 68056], [8, 80121, 65609, 64808, 61634, 92532], [9, 160499, 135565, 128567, 119236, 162224], [10, 57303, 48052, 40318, 31949, 36290]], '33': [['Density', '18-29', '30-39', '40-49', '50-59', '60+'], [1, 18173, 15752, 21640, 30882, 53332], [2, 42192, 32677, 41340, 52729, 74828], [3, 43297, 40288, 50099, 59249, 76730], [4, 32719, 21903, 25900, 31166, 44751], [5, 16175, 8527, 8693, 10755, 15391], [6, 19959, 10887, 10938, 12909, 19129], [7, 18018, 9899, 8151, 9976, 15210], [8, 4943, 4263, 3632, 3955, 5170], [9, 7971, 5962, 4237, 4178, 5497], [10, 4066, 2871, 2322, 2126, 2534]], '34': [['Density', '18-29', '30-39', '40-49', '50-59', '60+'], [1, 3250, 2505, 3306, 4200, 7505], [2, 47789, 36209, 51535, 64272, 96656], [3, 97365, 74695, 101002, 126306, 177321], [4, 108862, 87285, 121361, 136148, 203304], [5, 140856, 118619, 148698, 165075, 258472], [6, 135959, 113274, 140245, 160037, 250167], [7, 159956, 136708, 145369, 158039, 227349], [8, 143835, 128500, 131123, 136488, 189386], [9, 179675, 155426, 140691, 140529, 191379], [10, 348129, 299606, 243628, 219285, 286587]], '35': [['Density', '18-29', '30-39', '40-49', '50-59', '60+'], [1, 68323, 50999, 51999, 65963, 112532], [2, 23707, 19025, 19217, 23823, 38582], [3, 38595, 31256, 28796, 32493, 55117], [4, 30847, 26876, 24152, 28032, 50434], [5, 37721, 24612, 23016, 25018, 42401], [6, 35125, 25030, 23566, 24483, 36875], [7, 39988, 32734, 28353, 33619, 54647], [8, 45068, 30566, 26530, 28040, 47763], [9, 24920, 20933, 14777, 15102, 20660], [10, 1324, 1281, 882, 535, 764]], '36': [['Density', '18-29', '30-39', '40-49', '50-59', '60+'], [1, 126414, 101765, 120345, 158140, 252942], [2, 217603, 161910, 206249, 260478, 391718], [3, 130708, 97427, 131197, 155564, 228062], [4, 174252, 125274, 147482, 170980, 264900], [5, 173429, 125507, 145237, 175657, 277262], [6, 197499, 129674, 146874, 168391, 272745], [7, 186515, 134214, 147577, 166264, 254695], [8, 210370, 139348, 143249, 158674, 232356], [9, 333797, 239091, 234805, 249978, 367482], [10, 1677759, 1385651, 1136573, 1090618, 1652904]], '37': [['Density', '18-29', '30-39', '40-49', '50-59', '60+'], [1, 111941, 91392, 109767, 130906, 236547], [2, 299500, 244955, 293259, 323127, 522202], [3, 303095, 250981, 292167, 297298, 479040], [4, 230833, 180362, 193345, 184458, 286253], [5, 196773, 162881, 161932, 154113, 223748], [6, 219407, 175722, 166099, 153343, 210934], [7, 149305, 101518, 87039, 81053, 107076], [8, 98844, 54743, 41343, 34120, 41476], [9, 41453, 11620, 5172, 4014, 4492], [10, 1227, 786, 561, 442, 223]], '38': [['Density', '18-29', '30-39', '40-49', '50-59', '60+'], [1, 27982, 26691, 26542, 36647, 59661], [2, 6353, 6684, 5288, 6201, 7798], [3, 31952, 18311, 13555, 14038, 20396], [4, 12169, 8057, 6226, 7124, 11032], [5, 7148, 5104, 4736, 5079, 7637], [6, 18301, 9900, 8211, 10083, 15071], [7, 17077, 10316, 7742, 8997, 14574], [8, 16429, 9347, 6988, 7277, 11802], [9, 11221, 2432, 1481, 2161, 3284], [10, 0, 0, 0, 0, 0]], '39': [['Density', '18-29', '30-39', '40-49', '50-59', '60+'], [1, 107648, 94490, 114029, 137074, 207267], [2, 227565, 186016, 221933, 265800, 409140], [3, 196648, 156755, 178504, 211451, 349118], [4, 192389, 159312, 180943, 197106, 325209], [5, 205140, 180911, 184678, 204362, 327158], [6, 252911, 199858, 200916, 230594, 371839], [7, 210318, 158036, 145396, 160589, 247532], [8, 205422, 156377, 140129, 154206, 224662], [9, 195586, 108229, 83185, 90332, 120895], [10, 61416, 11818, 9410, 9172, 10353]], '40': [['Density', '18-29', '30-39', '40-49', '50-59', '60+'], [1, 134496, 112834, 121737, 141405, 238707], [2, 73071, 60377, 61854, 69784, 107466], [3, 68347, 55603, 52671, 56256, 89920], [4, 64879, 53559, 46898, 49727, 80216], [5, 57923, 42371, 37837, 39681, 58785], [6, 60332, 49377, 41019, 45454, 66937], [7, 97491, 71350, 59234, 61532, 96340], [8, 68470, 46306, 35171, 35485, 49742], [9, 25037, 13603, 9876, 8068, 11840], [10, 7936, 1480, 583, 603, 306]], '41': [['Density', '18-29', '30-39', '40-49', '50-59', '60+'], [1, 66290, 58588, 66279, 90914, 190978], [2, 46792, 44648, 44655, 55293, 108588], [3, 50212, 42328, 47854, 50275, 91193], [4, 35050, 30904, 27655, 29985, 55950], [5, 46702, 40208, 44426, 43756, 77130], [6, 52209, 39475, 38662, 39291, 66372], [7, 80712, 65495, 62010, 59140, 103718], [8, 123424, 105630, 85093, 84333, 128413], [9, 102603, 101586, 79930, 64816, 89013], [10, 35343, 22203, 12995, 9136, 14205]], '42': [['Density', '18-29', '30-39', '40-49', '50-59', '60+'], [1, 98330, 80829, 101300, 125873, 214041], [2, 232510, 192786, 243623, 300344, 492520], [3, 224007, 180550, 226262, 269914, 431647], [4, 171361, 150654, 186119, 210497, 340723], [5, 159877, 126168, 144882, 166259, 295107], [6, 189872, 147074, 148764, 175477, 299509], [7, 181204, 136274, 130982, 151251, 257968], [8, 180437, 130320, 116317, 132681, 216568], [9, 206737, 132994, 109751, 122817, 188461], [10, 416153, 250992, 193932, 197947, 275772]], '44': [['Density', '18-29', '30-39', '40-49', '50-59', '60+'], [1, 0, 0, 0, 0, 0], [2, 7875, 6375, 10096, 12878, 17354], [3, 18156, 11917, 16576, 21890, 34898], [4, 17925, 10420, 12990, 16901, 28827], [5, 20874, 16901, 19861, 22820, 37985], [6, 17573, 10941, 10709, 13515, 21837], [7, 17776, 13525, 12678, 15690, 25080], [8, 23547, 16992, 15807, 16542, 25500], [9, 29294, 18797, 15662, 17418, 23319], [10, 34735, 21680, 16665, 14213, 17494]], '45': [['Density', '18-29', '30-39', '40-49', '50-59', '60+'], [1, 85107, 67567, 76501, 96125, 169343], [2, 135551, 106890, 118031, 133501, 219287], [3, 150054, 118074, 127233, 135890, 225336], [4, 123955, 107939, 107709, 109715, 191536], [5, 127156, 100669, 94574, 99126, 163486], [6, 92078, 59951, 56612, 53515, 86802], [7, 48108, 30972, 26125, 27526, 38684], [8, 23393, 7410, 4943, 5164, 6760], [9, 8047, 2114, 1317, 1854, 3111], [10, 6801, 1194, 731, 452, 864]], '46': [['Density', '18-29', '30-39', '40-49', '50-59', '60+'], [1, 43590, 37605, 36579, 50450, 80868], [2, 15762, 12456, 11288, 13943, 23838], [3, 23969, 17581, 15130, 15419, 27040], [4, 11718, 7395, 5723, 5705, 8913], [5, 7905, 6692, 5993, 7001, 12232], [6, 6907, 4786, 3696, 5059, 8023], [7, 13886, 11371, 9010, 10096, 13995], [8, 15033, 8350, 6328, 6620, 10459], [9, 1815, 1355, 747, 1124, 1028], [10, 0, 0, 0, 0, 0]], '47': [['Density', '18-29', '30-39', '40-49', '50-59', '60+'], [1, 122305, 104317, 127758, 145717, 243462], [2, 164516, 141562, 166675, 182610, 307852], [3, 148550, 132625, 142289, 153496, 249173], [4, 152128, 130850, 131882, 131980, 203253], [5, 130619, 107322, 101295, 106009, 162071], [6, 127339, 96376, 82080, 82793, 120484], [7, 107879, 67681, 58373, 56536, 79700], [8, 76391, 44590, 35174, 32878, 38533], [9, 34456, 12901, 8179, 7515, 9360], [10, 2822, 1860, 1253, 1204, 831]], '48': [['Density', '18-29', '30-39', '40-49', '50-59', '60+'], [1, 360293, 301862, 318248, 376377, 659772], [2, 299727, 255528, 266157, 281518, 409554], [3, 351778, 304763, 292920, 287982, 399915], [4, 424916, 357791, 333947, 299440, 415157], [5, 421716, 357801, 346401, 301452, 406596], [6, 553570, 467989, 443607, 404175, 527565], [7, 688716, 573480, 530152, 486983, 657509], [8, 841308, 663760, 594189, 547627, 695757], [9, 636054, 445955, 381514, 333190, 389868], [10, 189413, 125025, 81788, 58920, 56770]], '49': [['Density', '18-29', '30-39', '40-49', '50-59', '60+'], [1, 46363, 45372, 37167, 40470, 65146], [2, 26095, 21506, 18763, 17588, 28217], [3, 31644, 30670, 25760, 22027, 29796], [4, 47653, 41422, 30682, 24609, 33526], [5, 38801, 34230, 25499, 20648, 30940], [6, 48438, 41729, 34496, 30940, 43081], [7, 78838, 63419, 50170, 45860, 64995], [8, 105256, 86847, 63000, 56840, 87840], [9, 110212, 70258, 48981, 40023, 56442], [10, 28580, 4331, 2984, 1877, 2499]], '50': [['Density', '18-29', '30-39', '40-49', '50-59', '60+'], [1, 25082, 23148, 27846, 37432, 61314], [2, 30213, 22081, 25346, 31416, 50788], [3, 15044, 8882, 10765, 12279, 18267], [4, 3392, 3205, 3145, 3517, 6692], [5, 5016, 4307, 3556, 4073, 6450], [6, 2989, 2221, 1857, 2921, 4030], [7, 4541, 3208, 1807, 2850, 3775], [8, 9537, 1880, 1460, 1509, 2191], [9, 389, 501, 525, 523, 788], [10, 6349, 1334, 657, 602, 1043]], '51': [['Density', '18-29', '30-39', '40-49', '50-59', '60+'], [1, 121858, 97614, 119652, 152341, 266927], [2, 146486, 120650, 153788, 179003, 285475], [3, 95981, 76438, 85700, 89638, 136381], [4, 105341, 85939, 92203, 99951, 157769], [5, 147841, 115112, 122604, 123474, 171977], [6, 177751, 128455, 129865, 132367, 180823], [7, 163555, 141136, 140055, 137914, 182447], [8, 182749, 147050, 125681, 125942, 158014], [9, 150027, 124594, 91562, 81053, 90715], [10, 101577, 84639, 50176, 38164, 45648]], '53': [['Density', '18-29', '30-39', '40-49', '50-59', '60+'], [1, 73983, 64126, 70171, 94420, 165303], [2, 65765, 59531, 65548, 81460, 136960], [3, 104838, 88345, 92455, 111157, 175881], [4, 97823, 89946, 90391, 92743, 140736], [5, 89990, 82540, 82757, 86843, 123308], [6, 138712, 123247, 119700, 119504, 177304], [7, 173956, 146676, 130415, 132699, 194274], [8, 203013, 175417, 150795, 147398, 207164], [9, 138853, 107579, 82856, 71936, 99605], [10, 95971, 60845, 32696, 25262, 39755]], '54': [['Density', '18-29', '30-39', '40-49', '50-59', '60+'], [1, 69069, 62423, 73445, 85910, 154026], [2, 60948, 51310, 60041, 65382, 113851], [3, 55580, 45807, 47996, 52559, 91192], [4, 19389, 18276, 17142, 19823, 34978], [5, 14543, 13172, 13996, 14518, 29342], [6, 23411, 14650, 12794, 14046, 26985], [7, 9359, 4939, 4596, 4942, 8450], [8, 14238, 4624, 3903, 4615, 8570], [9, 5510, 1515, 929, 1280, 1857], [10, 3835, 81, 41, 37, 49]], '55': [['Density', '18-29', '30-39', '40-49', '50-59', '60+'], [1, 127251, 120291, 142290, 192961, 309039], [2, 97905, 92744, 105482, 128653, 181776], [3, 95175, 84920, 93138, 108662, 154953], [4, 100770, 84494, 86362, 101458, 154308], [5, 78597, 64058, 62705, 70781, 112944], [6, 86845, 69056, 60207, 68635, 108295], [7, 78400, 60859, 50814, 57977, 94148], [8, 81779, 59163, 47090, 49484, 69982], [9, 91760, 56744, 45600, 47294, 57703], [10, 80998, 29735, 21170, 19721, 24091]], '56': [['Density', '18-29', '30-39', '40-49', '50-59', '60+'], [1, 24255, 26318, 23991, 32613, 50364], [2, 11629, 10400, 8668, 9126, 12965], [3, 13931, 10426, 8685, 8962, 14517], [4, 9409, 6493, 5610, 6373, 10488], [5, 12095, 7767, 6820, 7238, 10778], [6, 13359, 8750, 7878, 8805, 14553], [7, 6661, 5120, 3716, 4735, 7340], [8, 3015, 2044, 1649, 1864, 2274], [9, 2226, 284, 201, 142, 305], [10, 0, 0, 0, 0, 0]]};
var demoType = "densityRace";
var demoState = "00";
function drawChart(state) {
		if (state == "99") {
			state = demoState;
		}
		document.getElementById("stateName").innerHTML = stateData[state].name;
		document.getElementById("stateHistoryName").innerHTML = stateData[state].name;
		var usAvg = {1976:-2.06,1980:9.74,1984:18.21,1988:7.72,1992:-5.56,1996:-8.51,2000:-0.51,2004:2.46,2008:-7.27,2012:-3.86,2016:-2.09};
		for (var tempYear=1976;tempYear<2017;tempYear+=4){
			
			if (stateTotals[state].demOld[tempYear] > stateTotals[state].gopOld[tempYear]) {
				document.getElementById("state"+tempYear).innerHTML = "D+" + Math.trunc(100*(stateTotals[state].demOld[tempYear]-stateTotals[state].gopOld[tempYear])/(stateTotals[state].demOld[tempYear]+stateTotals[state].gopOld[tempYear]+stateTotals[state].othOld[tempYear]));
			}
			else {
				document.getElementById("state"+tempYear).innerHTML = "R+" + Math.trunc(100*(stateTotals[state].gopOld[tempYear]-stateTotals[state].demOld[tempYear])/(stateTotals[state].demOld[tempYear]+stateTotals[state].gopOld[tempYear]+stateTotals[state].othOld[tempYear]));
			}
			if (100*(stateTotals[state].gopOld[tempYear]-stateTotals[state].demOld[tempYear])/(stateTotals[state].demOld[tempYear]+stateTotals[state].gopOld[tempYear]+stateTotals[state].othOld[tempYear]) < usAvg[tempYear]) {
				document.getElementById("state"+tempYear+'adj').innerHTML = "D+" + Math.trunc(usAvg[tempYear]+100*(stateTotals[state].demOld[tempYear]-stateTotals[state].gopOld[tempYear])/(stateTotals[state].demOld[tempYear]+stateTotals[state].gopOld[tempYear]+stateTotals[state].othOld[tempYear]));
			}
			else {
				document.getElementById("state"+tempYear+'adj').innerHTML = "R+" + Math.trunc(-1*usAvg[tempYear]+100*(stateTotals[state].gopOld[tempYear]-stateTotals[state].demOld[tempYear])/(stateTotals[state].demOld[tempYear]+stateTotals[state].gopOld[tempYear]+stateTotals[state].othOld[tempYear]));
			}
		}
		
		var histoData = allStateDemos[state];
		if (demoType == "densityAge") {
        	histoData = allStatesAge5[state];
        }

        var dataH = google.visualization.arrayToDataTable(histoData);

		  var options = {
			hAxis: {title: 'Density', logScale: false, viewWindow:{min:0,max:11}},
            vAxis: {logScale: false, format: 'short'},
            legend: { position: 'top', maxLines: 3 },
			isStacked: true,
		  };


        var chartH = new google.visualization.ColumnChart(document.getElementById('histogram_div'));
        
        chartH.draw(dataH,options);
        demoState = state;
        

}

function changeUrban() {
		var urbanArr = [8,9,10];
		var suburbanArr = [3,4,5,6,7];
		var ruralArr = [1,2];
		var allArr = [1,2,3,4,5,6,7,8,9,10];
		
		var urbanBonus = document.getElementById('myUrban').value;
		var suburbanBonus = document.getElementById('mySuburban').value;
		var ruralBonus = document.getElementById('myRural').value;
		
		var whiteBonus = document.getElementById('myWhite').value;
		var blackBonus = document.getElementById('myBlack').value;
		var latinoBonus = document.getElementById('myLatino').value;
		var asianBonus = document.getElementById('myAsian').value;
		var otherBonus = document.getElementById('myOther').value;
		
		var ageBonus = [document.getElementById('myAge1').value,document.getElementById('myAge2').value,document.getElementById('myAge3').value,document.getElementById('myAge4').value,document.getElementById('myAge5').value];
		
		for (var i=0; i<STATE_FIPS.length; ++i) {
			var s = stateTotals[STATE_FIPS[i]];
		  var demoData = allStateDemos[STATE_FIPS[i]];
		  var ageData = allStatesAge5[STATE_FIPS[i]];
		  s.dem=s.demOld[2016];
		  s.gop=s.gopOld[2016];
		  
		  var demoNum = 0;
		  if (urbanBonus > 0){
			  for (var iii=0;iii<urbanArr.length;iii++){
				demoNum += demoData[urbanArr[iii]][1]+demoData[urbanArr[iii]][2]+demoData[urbanArr[iii]][3]+demoData[urbanArr[iii]][4]+demoData[urbanArr[iii]][5];
			  }
			  s.gop += Math.round(demoNum*urbanBonus/100);
		  }
		  else if (urbanBonus < 0){
			  for (var iii=0;iii<urbanArr.length;iii++){
				demoNum += demoData[urbanArr[iii]][1]+demoData[urbanArr[iii]][2]+demoData[urbanArr[iii]][3]+demoData[urbanArr[iii]][4]+demoData[urbanArr[iii]][5];
			  }
			  s.dem -= Math.round(demoNum*urbanBonus/100);
		  }
		  
		  demoNum = 0;
		  if (suburbanBonus > 0){
			  for (var iii=0;iii<suburbanArr.length;iii++){
				demoNum += demoData[suburbanArr[iii]][1]+demoData[suburbanArr[iii]][2]+demoData[suburbanArr[iii]][3]+demoData[suburbanArr[iii]][4]+demoData[suburbanArr[iii]][5];
			  }
			  s.gop += Math.round(demoNum*suburbanBonus/100);
		  }
		  else if (suburbanBonus < 0){
			  for (var iii=0;iii<suburbanArr.length;iii++){
				demoNum += demoData[suburbanArr[iii]][1]+demoData[suburbanArr[iii]][2]+demoData[suburbanArr[iii]][3]+demoData[suburbanArr[iii]][4]+demoData[suburbanArr[iii]][5];
			  }
			  s.dem -= Math.round(demoNum*suburbanBonus/100);
		  }
		  
		  demoNum = 0;
		  if (ruralBonus > 0){
			  for (var iii=0;iii<ruralArr.length;iii++){
				demoNum += demoData[ruralArr[iii]][1]+demoData[ruralArr[iii]][2]+demoData[ruralArr[iii]][3]+demoData[ruralArr[iii]][4]+demoData[ruralArr[iii]][5];
			  }
			  s.gop += Math.round(demoNum*ruralBonus/100);
		  }
		  else if (ruralBonus < 0){
			  for (var iii=0;iii<ruralArr.length;iii++){
				demoNum += demoData[ruralArr[iii]][1]+demoData[ruralArr[iii]][2]+demoData[ruralArr[iii]][3]+demoData[ruralArr[iii]][4]+demoData[ruralArr[iii]][5];
			  }
			  s.dem -= Math.round(demoNum*ruralBonus/100);
		  }
		  
		  demoNum = 0;
		  if (whiteBonus > 0){
			  for (var iii=0;iii<allArr.length;iii++){
			    demoNum += demoData[allArr[iii]][1];
			  }
			  s.gop += Math.round(demoNum*whiteBonus/100);
		  }
		  else if (whiteBonus < 0){
			  for (var iii=0;iii<allArr.length;iii++){
			    demoNum += demoData[allArr[iii]][1];
			  }
			  s.dem -= Math.round(demoNum*whiteBonus/100);
		  }
		  
		  demoNum = 0;
		  if (blackBonus > 0){
			  for (var iii=0;iii<allArr.length;iii++){
			    demoNum += demoData[allArr[iii]][2];
			  }
			  s.gop += Math.round(demoNum*blackBonus/100);
		  }
		  else if (blackBonus < 0){
			  for (var iii=0;iii<allArr.length;iii++){
			    demoNum += demoData[allArr[iii]][2];
			  }
			  s.dem -= Math.round(demoNum*blackBonus/100);
		  }
		  
		  demoNum = 0;
		  if (latinoBonus > 0){
			  for (var iii=0;iii<allArr.length;iii++){
			    demoNum += demoData[allArr[iii]][3];
			  }
			  s.gop += Math.round(demoNum*latinoBonus/100);
		  }
		  else if (latinoBonus < 0){
			  for (var iii=0;iii<allArr.length;iii++){
			    demoNum += demoData[allArr[iii]][3];
			  }
			  s.dem -= Math.round(demoNum*latinoBonus/100);
		  }
		  
		  demoNum = 0;
		  if (asianBonus > 0){
			  for (var iii=0;iii<allArr.length;iii++){
			    demoNum += demoData[allArr[iii]][4];
			  }
			  s.gop += Math.round(demoNum*asianBonus/100);
		  }
		  else if (asianBonus < 0){
			  for (var iii=0;iii<allArr.length;iii++){
			    demoNum += demoData[allArr[iii]][4];
			  }
			  s.dem -= Math.round(demoNum*asianBonus/100);
		  }
		  
		  demoNum = 0;
		  if (otherBonus > 0){
			  for (var iii=0;iii<allArr.length;iii++){
			    demoNum += demoData[allArr[iii]][5];
			  }
			  s.gop += Math.round(demoNum*otherBonus/100);
		  }
		  else if (otherBonus < 0){
			  for (var iii=0;iii<allArr.length;iii++){
			    demoNum += demoData[allArr[iii]][5];
			  }
			  s.dem -= Math.round(demoNum*otherBonus/100);
		  }
		  
		  for (var ii=0;ii<5;ii++) {
		  	  demoNum = 0;
			  if (ageBonus[ii] > 0){
				  for (var iii=0;iii<allArr.length;iii++){
					demoNum += ageData[allArr[iii]][ii+1];
				  }
				  s.gop += Math.round(demoNum*ageBonus[ii]/100);
			  }
			  else if (ageBonus[ii] < 0){
				  for (var iii=0;iii<allArr.length;iii++){
					demoNum += ageData[allArr[iii]][ii+1];
				  }
				  s.dem -= Math.round(demoNum*ageBonus[ii]/100);
			  }
		  }
		  	
			
			
		}
		update();

}
setFirstSize();

function showSelectYear() {
	if (document.getElementById("selectYear").style.display == "none") {
		document.getElementById("selectYear").style.display = "inline-block";
	}
	else {
		document.getElementById("selectYear").style.display = "none";
	}
}
function showDemoType() {
	if (document.getElementById("demoType").style.display == "none") {
		document.getElementById("demoType").style.display = "inline-block";
	}
	else {
		document.getElementById("demoType").style.display = "none";
	}
}

function toggleDemoType(newDemo) {
	demoType = newDemo;
	drawChart("99");
	document.getElementById("demoType").style.display = "none";
}
